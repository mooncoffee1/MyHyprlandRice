"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7379],{44711:(e,t,l)=>{l.d(t,{l:()=>h});var r=l(59496),a=l(30099),s=l(43686),i=l(48989),o=l(87283);const n={"custom-order":i.HI,title:{column:o.Q.TITLE,order:o.k.ASC},artist:{column:o.Q.TITLE,order:o.k.SECONDARY_ASC},"added-by":{column:o.Q.ADDED_BY,order:o.k.ASC},"added-at":{column:o.Q.ADDED_AT,order:o.k.ASC},duration:{column:o.Q.DURATION,order:o.k.ASC},album:{column:o.Q.ALBUM,order:o.k.ASC},"album-or-podcast":{column:o.Q.ALBUM_OR_PODCAST,order:o.k.ASC},"album-or-show":{column:o.Q.ALBUM_OR_SHOW,order:o.k.ASC}},c={title:o.Q.TITLE,artist:o.Q.TITLE,"added-by":o.Q.ADDED_BY,"added-at":o.Q.ADDED_AT,duration:o.Q.DURATION,album:o.Q.ALBUM,"album-or-podcast":o.Q.ALBUM_OR_PODCAST,"album-or-show":o.Q.ALBUM_OR_SHOW},u={[o.k.NONE]:o.k.NONE,[o.k.ASC]:o.k.DESC,[o.k.DESC]:o.k.ASC,[o.k.SECONDARY_ASC]:o.k.SECONDARY_DESC,[o.k.SECONDARY_DESC]:o.k.SECONDARY_ASC},d={[o.Q.INDEX]:{key:"custom-order",get value(){return a.ag.get("sort.custom-order")}},[o.Q.TITLE]:{key:"title",get value(){return a.ag.get("sort.title")}},[o.Q.ARTIST]:{key:"artist",get value(){return a.ag.get("sort.artist")}},[o.Q.ADDED_BY]:{key:"added-by",get value(){return a.ag.get("sort.added-by")}},[o.Q.ADDED_AT]:{key:"added-at",get value(){return a.ag.get("sort.date-added")}},[o.Q.DURATION]:{key:"duration",get value(){return a.ag.get("sort.duration")}},[o.Q.EVENT_DATE]:null,[o.Q.EVENT_INFO]:null,[o.Q.ALBUM]:{key:"album",get value(){return a.ag.get("sort.album")}},[o.Q.ALBUM_OR_PODCAST]:{key:"album-or-podcast",get value(){return a.ag.get("sort.album-or-podcast")}},[o.Q.ALBUM_OR_SHOW]:{key:"album-or-show",get value(){return a.ag.get("sort.album-or-show")}},[o.Q.PLAYS]:null,[o.Q.RELEASE_DATE]:null,[o.Q.ADD]:null,[o.Q.ACTIONS]:null};var g=l(36342),m=l(88104),x=l(4637);function k(e){return!!e}const h=({columns:e,disabled:t,onSort:l,isBooklist:h=!1})=>{let y=[...e];h?y=i.i1:y.splice(2,0,g.QD.ARTIST);const{sortState:A,setSortState:C}=(0,r.useContext)(i.Gb),b=function(e){return null===e.column?d[g.QD.INDEX]:(0,m.cB)(e.column,e.order)?d[g.QD.ARTIST]:d[e.column]}(A),S=(0,r.useCallback)((e=>{l?.(),C(((e,t,l)=>e?t!==c[e]||"artist"===e&&[o.k.ASC,o.k.DESC].includes(l)||"title"===e&&[o.k.SECONDARY_ASC,o.k.SECONDARY_DESC].includes(l)?n[e]:{column:c[e],order:u[l]}:i.HI)(e,A.column,A.order))}),[l,C,A.column,A.order]),D=(0,r.useCallback)((()=>null!==A.column),[A.column]),f=y.map((e=>d[e])).filter(k);return(0,x.jsx)(s.A,{options:f,onSelect:S,selected:b,isSelectionChanged:D,sortOrder:A.order,heading:a.ag.get("drop_down.sort_by"),disabled:t})}},12596:(e,t,l)=>{l.r(t),l.d(t,{default:()=>te});var r=l(59496),a=l(9102),s=l(93660),i=l(2542),o=l(54729),n=l(30099),c=l(62926),u=l(7018),d=l(20456),g=l(29915),m=l(75132),x=l(68224),k=l(88104),h=l(29629),y=l(36342),A=l(48989),C=l(65671),b=l(25756),S=l(90477),D=l(22408),f=l(13138),p=l(34046),j=l(9990),E=l(46927),T=l(31186),v=l(5684),I=l(44711);const P="uCHqQ74vvHOnctGg0X0B",Q="feuNq1FTxMbdeOTuFgpA";var _=l(4637);const R=r.memo((({tracklistDomRef:e})=>{const{spec:t,logger:l}=(0,p.fU)(T.createDesktopSearchBarEventFactory,{}),a=(0,r.useCallback)((()=>{l.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[l,t]),s=(0,r.useCallback)((()=>{l.logInteraction(t.filterFieldFactory().hitClearFilter())}),[l,t]),i=(0,r.useCallback)((()=>{l.logInteraction(t.sortButtonFactory().hitSort())}),[l,t]);return(0,_.jsxs)("div",{className:Q,children:[(0,_.jsx)(r.Suspense,{fallback:null,children:(0,_.jsx)(v.K,{placeholder:n.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:a,onClear:s})}),(0,_.jsx)(I.l,{columns:A.MI,onSort:i})]})}));var O=l(26473),N=l(34198),U=l(47948),B=l(99550);const F=r.memo((function({tracklistDomRef:e,togglePlay:t,isPlaying:l,isActive:a,backgroundColor:s,spec:i,logger:o}){const c=(0,j.W6)(U.eKc,{loadingValue:!1}),u=(0,r.useMemo)((()=>i.shuffleButtonContainerFactory()),[i]),d=(0,O.j)(),g=(0,r.useCallback)((()=>{const e=(0,N.aK)({isPlaying:l,isActive:a,spec:i.playButtonFactory(),logger:o,uri:b.b});t({loggingParams:e})}),[a,l,o,i,t]);return(0,_.jsx)(E.o,{backgroundColor:s,children:(0,_.jsxs)(E.F,{children:[(0,_.jsx)(x.$,{size:d,onClick:g,isPlaying:l,uri:b.b}),c&&(0,_.jsx)(p.Nh,{spec:u,children:(0,_.jsx)(B.K,{entityName:n.ag.get("local-files"),contextUri:b.b,activationPlacement:"bottomEnd",size:d})}),(0,_.jsx)(p.Nh,{spec:i,children:(0,_.jsx)(R,{tracklistDomRef:e})})]})})}));var L=l(39987),M=l(70231),w=l(4085),Y=l(15644),H=l(57161),z=l(17887),W=l(31481),K=l(90216),X=l(21345),G=l(19341);const V=r.memo((function({uri:e,uid:t,name:l,duration_ms:a,artists:s,album:i,is19PlusOnly:o,isExplicit:c,isPlayable:u,index:d,contextUri:g,imgUrl:m,usePlayContextItem:x}){const{spec:k}=(0,p.fU)(L.r,{data:{position:d,reason:"",uri:e}}),{filter:y}=(0,r.useContext)(h.fo),{isActive:A,isPlaying:C,triggerPlay:b,togglePlay:S}=x({uid:t,uri:e,index:d}),{badges:D,hasBadges:f}=(0,H.r)({isExplicit:c}),j=s?.map((e=>e.name)).join(n.ag.getSeparator())||"";return(0,_.jsx)(Y.ZP,{value:"row",index:d,children:(0,_.jsx)(M._,{menu:(0,_.jsx)(z.N,{uri:e,uid:t,contextUri:g}),children:(0,_.jsxs)(G.c,{uri:e,contextUri:g,isActive:A,index:d,onTriggerPlay:(e,t)=>{b({loggingParams:t})},ariaRowIndex:d+1,isPlayable:u,ageRestricted:o,dragMetadata:{name:l,createdBy:j},spec:k,children:[(0,_.jsx)(K.Dd,{ariaColIndex:0,children:(0,_.jsx)(K.Du,{uri:e,playAriaLabel:n.ag.get("tracklist.a11y.play",l,j),isPlaying:C,isActive:A,onClick:(e,t)=>{S({loggingParams:t})},spec:k,children:(0,_.jsx)(K.km,{children:d+1})})}),(0,_.jsxs)(K.vZ,{ariaColIndex:1,children:[(0,_.jsx)(K.lD,{src:m}),(0,_.jsxs)(K.vm,{children:[(0,_.jsx)(K.Wh,{titleText:l,children:(0,_.jsx)(W.o,{searchWords:[y],textToHighlight:l})}),f&&(0,_.jsx)(K.g3,{children:D.explicit?(0,_.jsx)(w.N,{}):null}),(0,_.jsx)(K.K9,{children:s&&(0,_.jsx)(X.o,{nonInteractive:!0,artists:s,filter:y})})]})]}),(0,_.jsx)(K.UA,{ariaColIndex:2,children:i?.name&&(0,_.jsx)(K.BM,{nonInteractive:!0,uri:i?.uri,name:i?.name,children:(0,_.jsx)(W.o,{searchWords:[y],textToHighlight:i?.name})})}),(0,_.jsxs)(K.mU,{ariaColIndex:3,children:[(0,_.jsx)(K.A$,{duration:a}),(0,_.jsx)(K.Zv,{menu:(0,_.jsx)(z.N,{uri:e,uid:t,contextUri:g}),label:n.ag.get("more.label.track",l,j),spec:k})]})]})})})}),((e,t)=>e.uri===t.uri&&e.index===t.index));var Z=l(34997);const $=new Set(A.MI),q=r.memo((function({uri:e,tracks:t,columns:l,sortState:a,handleSort:s,usePlayContextItem:i,tracklistDomRef:o}){const c=(0,r.useRef)(null),u=(0,r.useCallback)(((t,l)=>{const r=(0,Z.X)(t.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,_.jsx)(V,{index:l,contextUri:e,uri:t.uri,uid:t.uid,isPlayable:t.isPlayable,duration_ms:t.duration.milliseconds,name:t.name,artists:t.artists,album:t.album||void 0,isExplicit:t.isExplicit,is19PlusOnly:t.is19PlusOnly,type:t.type,imgUrl:r?.url||"",usePlayContextItem:i},t.uid)}),[e,i]);return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(Y.ZP,{value:"playlist-tracklist",children:(0,_.jsx)(y.Pv,{ariaLabel:n.ag.get("local-files"),hasHeaderRow:!0,columns:l,sortableColumns:$,sortState:a,onSort:s,renderRow:u,resolveUri:e=>e.uri,resolveUid:e=>e.uid,tracks:t,nrTracks:t.length,limit:100,outerRef:c,outerDomRef:o},e)})})})),J=[y.QD.INDEX,y.QD.TITLE,y.QD.ALBUM,y.QD.DURATION],ee=()=>{const{filter:e}=(0,r.useContext)(h.fo),{sortState:t,setSortState:l}=(0,r.useContext)(A.Gb),y=(0,r.useContext)(S.t),j=(0,D.I)(),E=(0,C.Y)(s.Fzl),T=(0,r.useRef)(null),{spec:v}=(0,p.fU)(o.G,{data:{uri:b.b}}),I=(0,r.useMemo)((()=>v.actionBarFactory()),[v]),Q=(0,r.useMemo)((()=>v.tracklistFactory()),[v]),R=(0,p.$P)(),O=(0,r.useCallback)(((e,r)=>{l((0,k.VK)(e,t)),R.logInteraction(v.tracklistFactory().columnHeaderFactory({identifier:e,position:r||0}).hitSort())}),[l,t,R,v]),{data:N}=(0,a.useQuery)(["local-files",t,e],(()=>y.getTracks((0,k._j)(t),e)),{staleTime:0,cacheTime:3e5,keepPreviousData:!0,enabled:j}),{isActive:U,isPlaying:B,togglePlay:L,usePlayContextItem:M}=(0,f.n)({uri:b.b,pages:[{items:(N??[]).map((e=>({...e,provider:null})))}]},{featureIdentifier:"local_files"});return N?e||N.length&&j?(0,_.jsxs)("div",{role:"presentation",className:P,children:[(0,_.jsxs)(u.gF,{backgroundColor:E,children:[(0,_.jsxs)(d.W,{children:[(0,_.jsx)(x.$,{size:"medium",onClick:()=>L(),isPlaying:B,uri:b.b}),(0,_.jsx)(g.i,{text:n.ag.get("local-files")})]}),(0,_.jsxs)(u.sP,{children:[(0,_.jsx)(u.xd,{children:n.ag.get("local-files")}),(0,_.jsx)(u.T0,{children:n.ag.get("local-files.description")})]})]}),(0,_.jsx)(F,{togglePlay:L,isPlaying:B,isActive:U,backgroundColor:E,tracklistDomRef:T,spec:I,logger:R}),(0,_.jsx)("div",{className:"contentSpacing",children:(0,_.jsx)(p.Nh,{spec:Q,children:(0,_.jsx)(q,{tracks:N,uri:b.b,columns:J,handleSort:O,sortState:t,usePlayContextItem:M,tracklistDomRef:T})})})]}):(0,_.jsx)(c.u,{linkTo:"/preferences",linkTitle:n.ag.get("local-files.empty-button"),message:n.ag.get("local-files.empty-description"),title:n.ag.get("local-files.empty-header"),children:(0,_.jsx)(i.Y,{iconSize:64,"aria-hidden":"true"})}):(0,_.jsx)(m.h,{hasError:!1,errorMessage:n.ag.get("error.request-artist-failure"),loadOffline:!0})},te=()=>(0,_.jsx)(A.kz,{uri:"spotify:internal:local-files",children:(0,_.jsx)(h.hz,{uri:"spotify:internal:local-files",children:(0,_.jsx)(ee,{})})})}}]);
//# sourceMappingURL=xpui-routes-collection-local-files.js.map