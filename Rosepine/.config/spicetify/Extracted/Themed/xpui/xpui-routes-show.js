"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5713],{24393:(e,t,a)=>{a.d(t,{V:()=>B,e:()=>D});var i=a(59496),s=a(83792),n=a(9990),o=a(22321),r=a(14887),l=a(11891),c=a(59528),u=a(41946),d=a(26413),g=a(6722),p=a(23650),m=a(39667),h=a(84351),x=a(90784),y=a(18112),j=a(35960),k=a(34483),b=a(70231),f=a(4085),v=a(29553),P=a(15644),C=a(26790),S=a(40674),I=a(34046),w=a(25639),N=a(57161),E=a(72390),A=a(47948),R=a(4637);function D(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}const T=e=>`activation-trigger-mme-${e}`,B=i.memo((function({index:e=-1,showMetadata:t,episode:a,usePlayContextItem:B,status:U,variant:F}){const O=(0,E.E)(),M=a.playedState.playPositionMilliseconds,L=a.uri,_=(0,i.useRef)(null),[z,W]=(0,i.useState)(a.playedState.state===w.sY.Completed),V=(0,x.O)(),G=(0,j.g)(),H=(0,C.jh)(),K=(0,y.o)(),Y=(0,s.I0)(),{UBIFragment:X,spec:q,logger:Z}=(0,I.fU)(o.createDesktopEpisodeBlockEventFactory,{data:{uri:L,reason:a.requestId||"",position:e}}),$=(0,I.Wi)(q),{isActive:J,isPlaying:Q,togglePlay:ee}=B({uri:L}),[te]=(0,S.z)(1e4,(e=>e?.item?.uri===L));(0,i.useEffect)((()=>{Q&&(_.current=te)}),[Q,te]),(0,i.useEffect)((()=>{!Q&&_.current&&a.duration.milliseconds<=_.current&&W(!0)}),[Q,a.duration.milliseconds]);const ae=(0,i.useCallback)((e=>{e||(_.current=0),W(e)}),[]),ie=e=>{if(e.target!==e.currentTarget)return;const i=`${a.name} â€¢ ${t.name}`;V(e,[L],i,t.uri)},se=D(t),ne=(0,k.s)({...a,coverArt:{sources:a.coverArt}},se),oe=(0,i.useCallback)((()=>{if(a.episodeType===w.Wf.Episode&&O)m.y.set((()=>({triggerId:T(a.uri),triggerAction:null})));else if(G)ne();else{let e;e=Q?q.playButtonFactory().hitPause({itemToBePaused:L}):J?q.playButtonFactory().hitResume({itemToBeResumed:L}):q.playButtonFactory().hitPlay({itemToBePlayed:L});const t=Z.logInteraction(e);K({targetUri:L,intent:Q?"pause":"play",type:"click"}),ee({loggingParams:t})}}),[J,ne,K,ee,L,Q,G,a,O,Z,q]),re=(0,i.useCallback)((()=>{Z.logInteraction(q.hitUiNavigate({destination:L})),K({type:"click",targetUri:L,intent:"navigate"})}),[L,K,Z,q]),le=a.podcastSubscription?.isPaywalled??!1,ce=a.podcastSubscription?.isUserSubscribed??!1,ue=le&&!ce,de=le&&G,{badges:ge}=(0,N.r)({contentRating:a.contentRating?.label,isPaywalled:le}),pe=(0,i.useCallback)((()=>Y((0,l.RM)(t.uri))),[t.uri,Y]),me=(0,i.useCallback)((e=>{let i=e;return(ue||de)&&(i=(0,R.jsx)(p.l,{enabled:!0,showUri:t.uri,children:i})),!a.playability.playable&&ge.nineteen&&(i=(0,R.jsx)("div",{onClick:e=>{e.stopPropagation(),pe()},children:e})),i=(0,R.jsx)(c.D,{id:T(L),targetURI:(0,r.EC)(L),children:i}),i}),[L,ue,de,t.uri,ge.nineteen,a.playability.playable,pe]),he=(0,n.W6)(A.eli,{loadingValue:!1});return(0,R.jsx)(X,{spec:q,children:(0,R.jsx)(P.ZP,{value:"row",index:e,children:(0,R.jsx)(b._,{onShow:()=>{Z.logInteraction(q.secondaryHitUiReveal())},menu:(0,R.jsx)(u.k,{uri:L,showUri:t.uri,sharingInfo:a.sharingInfo,isPlayed:z,onMarkAsPlayed:ae}),children:he?(0,R.jsx)(g.k,{ref:$,requestId:a.requestId,index:e,uri:L,size:H,images:a.coverArt||[],name:a.name,showName:t.name,description:a.description,isPlayable:a.playability.playable||ue,fullyPlayed:z,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate?.isoString||"",resumePositionMs:_.current??M,handleDragStart:ie,handlePlaybackClick:oe,handleClick:re,isCurrentlyPlaying:J,isPaywalled:le,isUserSubscribed:ce,isPlaying:Q,position:Q?te:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:ae,contentInformation:a.contentInformation,badges:(0,R.jsxs)(R.Fragment,{children:[ge.explicit&&(0,R.jsx)(f.N,{}),ge.paid&&(0,R.jsx)(h.g,{}),ge.nineteen&&(0,R.jsx)(v.X,{size:16})]}),playButtonWrapper:me,onMoreButtonClick:()=>{Z.logInteraction(q.moreButtonFactory().hitUiReveal())},status:U,variant:F}):(0,R.jsx)(d.X,{ref:$,requestId:a.requestId,index:e,uri:L,size:H,images:a.coverArt||[],name:a.name,showName:t.name,description:a.description,isPlayable:a.playability.playable||ue,fullyPlayed:z,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate?.isoString||"",resumePositionMs:_.current??M,handleDragStart:ie,handlePlaybackClick:oe,handleClick:re,isCurrentlyPlaying:J,isPaywalled:le,isUserSubscribed:ce,isPlaying:Q,position:Q?te:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:ae,contentInformation:a.contentInformation,badges:(0,R.jsxs)(R.Fragment,{children:[ge.explicit&&(0,R.jsx)(f.N,{}),ge.paid&&(0,R.jsx)(h.g,{}),ge.nineteen&&(0,R.jsx)(v.X,{size:16})]}),playButtonWrapper:me,onMoreButtonClick:()=>{Z.logInteraction(q.moreButtonFactory().hitUiReveal())},status:U,variant:F})})})})}))},3133:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ei});var i=a(59496),s=a(83792),n=a(97601),o=a(82864),r=a(70356),l=a(14887),c=a(30099),u=a(70304),d=a(75132),g=a(84875),p=a.n(g),m=a(51697),h=a(9990),x=a(38209),y=a(31667),j=a(40006),k=a(42228),b=a(18112),f=a(4229),v=a(68985),P=a(62768),C=a(4085),S=a(91472),I=a(46999);const w="_yl4tOZxcpoUt28k6B8I",N="lcJflizNrSwDM9yPNk6h",E="ret7iHkCxcJvsZU14oPY";var A=a(4637);const R=({rating:e,className:t,onClick:a})=>{if(!e)return null;const i=Boolean(e.rating?.rating);return(0,A.jsxs)("button",{className:p()(w,t),onClick:a,children:[(0,A.jsx)(m.D,{dir:"auto",variant:"mestoBold",children:e.averageRating?.showAverage?c.ag.formatNumber(e.averageRating.average,{maximumFractionDigits:1}):c.ag.get("web-player.audiobooks.noRating")}),i?(0,A.jsx)(S.u,{iconSize:16,className:p()(N)}):(0,A.jsx)(I.G,{iconSize:16,className:p()(N)}),e.averageRating?.showAverage&&(0,A.jsxs)(m.D,{variant:"mesto",className:p()(E),children:["(",c.ag.formatNumberCompact(Number(e.averageRating.totalRatings)),")"]})]})};var D=a(79186),T=a(56071),B=a(35585),U=a(95195);const F="SpVoh9vvBN0kIwzfCiBh",O="nsGHaEmn310z9W4RMbb8",M="PfYVlZzroXSurDmS_kxY",L="kCT99_BcJQtW47mEfVF6",_="gmDgEbPyRXNixmjYAT9f",z="XlZGcb86bItwlMPQ2jOf",W="VGTtqfOlX2jIbpff6mPP",V="aexqooSgfdW95poEaxjH",G="Fui2wGupk4F1Khigbrhj",H="jWcvSz47NFpbLjnkFT1O",K="Oo6MP8F01W5uGlnw8dag";var Y=a(63589),X=a(29553),q=a(22326),Z=a(57161),$=a(97210);let J=function(e){return e.SMALL="small",e.LARGE="large",e}({});const Q=({images:e,title:t,contentRating:a,duration:i,moreButton:s,onClick:n,onContextMenu:o,onTouchStart:r,onTouchEnd:l,isPlaying:c,isActive:u,size:d,className:g,label:h,isPlayable:x=!0})=>{const y=d===J.LARGE?"medium":"small",{badges:j}=(0,Z.r)({contentRating:a});return(0,A.jsxs)("div",{"data-testid":"trailer-component",className:p()(F,g,{[O]:u}),onContextMenu:o,onTouchStart:r,onTouchEnd:l,children:[(0,A.jsxs)("div",{className:L,children:[(0,A.jsxs)("div",{className:V,children:[(0,A.jsx)(T.O,{type:U.p.EPISODE,title:t,className:p()(W,{[K]:d===J.SMALL,[H]:d===J.LARGE}),size:B.m$.SIZE_56,images:e,shape:T.K.ROUNDED_CORNERS}),(0,A.jsx)("div",{className:G,children:(0,A.jsx)($.f,{"data-testid":"trailer-play-button",version:Y.ul.transparent,size:y,isPlaying:c,onClick:n,disabled:!x})})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{className:_,children:(0,A.jsx)(m.D,{dir:"auto",className:M,variant:"balladBold",children:t})}),(0,A.jsxs)("div",{className:z,children:[(0,A.jsx)(q.V,{text:h}),j.explicit&&(0,A.jsx)(C.N,{}),j.nineteen&&(0,A.jsx)(X.X,{}),(0,A.jsx)(m.D,{dir:"auto",variant:"mesto",children:(0,A.jsx)(D.nL,{durationMs:i})})]})]})]}),s]})};var ee=a(26790),te=a(88075),ae=a(13138),ie=a(65791),se=a(24966),ne=a(34046),oe=a(89528);const re=({htmlDescription:e,narrators:t,spec:a})=>{const s=(0,b.o)(),n=(0,ne.$P)(),o=(0,i.useCallback)((e=>{s({intent:"expand-description",type:"click"});const t=a.seeMoreButtonFactory();n.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[n,s,a]);return(0,A.jsxs)(A.Fragment,{children:[t.length?(0,A.jsx)(m.D,{as:"p",variant:"ballad",children:c.ag.get("web-player.audiobooks.narratedByX",t.join(c.ag.getSeparator()))}):null,e&&(0,A.jsx)(oe.o,{maxLines:4,content:e,htmlContent:e,onExpanded:o})]})};var le=a(46927),ce=a(98440),ue=a(64689),de=a(99750);const ge=i.memo((function({uri:e,size:t=de.q.md,className:a,onClick:s}){const[n,o]=(0,ue.Z)(e),r=(0,b.o)(),l=(0,i.useCallback)((()=>{r({targetUri:e,intent:n?"unsave":"save",type:"click"}),o(!n)}),[r,e,n,o]);return(0,A.jsx)(de.o,{className:a,isFollowing:n,onFollow:l,onClick:s,uri:e,size:t})}));var pe=a(46882);const me="8px";var he=a(40981),xe=a(5272),ye=a(68224),je=a(85830),ke=a(98484),be=a(12380),fe=a(35960),ve=a(77863);const Pe="iZut9Dh2KEjNVhDUxzWw";function Ce({uri:e,price:t,size:a,spec:i,logger:s,onPlayback:n}){const o=(0,ve.k)(),r=(0,fe.g)(),l=0===t?.finalPrice?.amount,u=l?i.getButtonFactory({uri:e}):i.buyButtonFactory({uri:e}),d=(0,je.y1)((async()=>{if(s.logInteraction(u.hitShowPaywall({paywalledItem:e})),r)n();else{try{t?.finalPrice?await(0,be.Q)({show_uri:e,currency:t.finalPrice.currency,price:t.finalPrice.amount}):o(c.ag.get("error.generic"))}catch(e){o(c.ag.get("error.generic"))}n()}}),2e3,{leading:!0,trailing:!1});return(0,A.jsx)(ke.D,{size:a,className:Pe,style:{flexShrink:0},onClick:d,children:l?c.ag.get("web-player.audiobooks.buyFree"):c.ag.get("web-player.audiobooks.buy")})}const Se=({uri:e,isLocked:t,price:a,isPlaying:i,isConsumptionCapped:s,onPlayback:n,logger:o,spec:r,size:l="large"})=>t&&!s?(0,A.jsx)(Ce,{size:l,uri:e,price:a,logger:o,spec:r,onPlayback:n}):(0,A.jsx)(ye.$,{size:l,isPlaying:i,uri:e,onClick:n});var Ie=a(33609),we=a(33735),Ne=a(26473),Ee=a(7442);const Ae=i.memo((function({backgroundColor:e,uri:t,name:a,isPlaying:n,togglePlay:o,isLocked:r,showDownloadButton:l,consumptionCapExplanation:u,price:d,spec:g}){const[p,m]=(0,ue.Z)(t),h=!(0,Ee.k)(),x=(0,s.I0)(),y=(0,b.o)(),k=(0,ne.$P)(),f=(0,i.useCallback)((()=>{y({targetUri:t,intent:p?"unsave":"save",type:"click"});const e=g.saveToLibraryButtonFactory();p?k.logInteraction(e.hitUnfollow({itemToBeUnfollowed:t})):k.logInteraction(e.hitFollow({itemToBeFollowed:t})),m(!p)}),[y,t,p,g,m,k]),v=(0,i.useCallback)(((e,a)=>{const i=g.downloadButtonFactory();u?x((0,Ie.S3)(u)):a===xe.mc.ADD?k.logInteraction(i.hitDownload({itemToDownload:t})):a===xe.mc.REMOVE?k.logInteraction(i.hitRemoveDownload({itemToRemoveFromDownloads:t})):a===xe.mc.NO_PERMISSION&&k.logInteraction(i.hitUiReveal())}),[u,x,k,g,t]),P=(0,i.useCallback)((()=>{const e=g.contextButtonFactory().hitUiReveal();k.logInteraction(e)}),[k,g]),C=(0,Ne.j)();return(0,A.jsx)(le.o,{backgroundColor:e,style:{"--action-bar-padding-bottom":me},children:(0,A.jsxs)(le.F,{children:[(0,A.jsx)(Se,{uri:t,isLocked:r,isConsumptionCapped:!!u,price:d,isPlaying:n,onPlayback:o,logger:k,spec:g,size:C}),(0,A.jsx)(we.r,{children:(0,A.jsx)(ce.H,{isAdded:p,onClick:f,disabled:h,size:C,isAudiobook:!0})},"follow-button"),l&&(0,A.jsx)(ge,{uri:t,onClick:v,size:C}),(0,A.jsx)(he.ClickToggleContextMenu,{menu:(0,A.jsx)(pe.X,{uri:t}),children:(0,A.jsx)(j.MoreButton,{label:c.ag.get("more.label.context",a),onClick:P,size:C})})]})})}));var Re=a(7018),De=a(20456),Te=a(29915),Be=a(54985),Ue=a(78390),Fe=a(47948);const Oe=i.memo((function({coverArt:e,name:t,authorName:a,uri:i,backgroundColor:s,isPlaying:n,togglePlay:o,isLocked:r,price:l,isConsumptionCapped:u,logger:d,spec:g}){const p=(0,h.W6)(Fe.vyX,{loadingValue:!1});return(0,A.jsxs)(Re.gF,{backgroundColor:s,children:[(0,A.jsxs)(De.W,{children:[(0,A.jsx)(Se,{uri:i,isLocked:r,price:l,isPlaying:n,isConsumptionCapped:u,onPlayback:o,logger:d,spec:g,size:"medium"}),(0,A.jsx)(Te.i,{text:t,dragUri:i,dragLabel:t})]}),(0,A.jsx)(he._,{menu:(0,A.jsx)(pe.X,{uri:i}),children:(0,A.jsx)(Re.Oz,{images:e,name:t,shape:p?T.K.SQUARE:T.K.ROUNDED_CORNERS})}),(0,A.jsxs)(Re.sP,{children:[(0,A.jsx)(Be.g,{children:c.ag.get("web-player.audiobooks.audiobook")}),(0,A.jsx)(Re.xd,{canEdit:!1,onClick:()=>{},scaleAtMinWidth:Re.vz,children:t}),(0,A.jsx)(Ue.m,{children:a})]})]})})),Me="HvVxzh4ZoggYAhgSxSth",Le=i.memo((({price:e})=>e.finalPrice&&e.finalListPrice?0===e.finalPrice.amount&&0===e.finalListPrice.amount?(0,A.jsxs)("div",{className:Me,children:[(0,A.jsx)(m.D,{variant:"cello",semanticColor:"textBase",children:c.ag.get("audiobook.freePriceDescription")}),(0,A.jsx)(m.D,{variant:"mesto",children:c.ag.get("audiobook.freePriceExplanation")})]}):(0,A.jsxs)("div",{className:Me,children:[(0,A.jsx)(m.D,{variant:"canon",semanticColor:"textBase",children:e.finalPrice.formattedPrice}),e.finalPrice.amount<e.finalListPrice.amount&&(0,A.jsx)(m.D,{variant:"ballad",semanticColor:"textSubdued",children:c.ag.get("web-player.audiobooks.retailPrice",(0,A.jsx)("span",{style:{textDecoration:"line-through"},children:e.finalListPrice.formattedPrice}))})]}):null));var _e=a(75170),ze=a(64547);var We=a(85537);var Ve=a(4745),Ge=a(34198),He=a(40674);const Ke="b0Vng72SrQiFroJKXfk2",Ye="FfeP3XKSZcAdfviyk8fv",Xe="eWxDd0LanTnTlSl8SOHX",qe="eAOkseqV13_CAmzuDJpa",Ze="fovofKIYdEIURgIYoKm2",$e="NXXFrQO7npgPCRuSKaAA",Je="ekkhhuxKVGAzkEmuh9kE",Qe="zd6xqobF255bxHFtCmXy",et=i.memo((function({name:e,duration:t,uri:a,bookName:n,usePlayContextItem:o,isChapterLocked:r,isPlayable:l,resumePositionMs:u,isFullyPlayed:d,isExplicit:g,is19PlusOnly:x,spec:y,index:f,consumptionCapExplanation:v}){const P=(0,i.useRef)(u),{isPlaying:S,togglePlay:I,isActive:w}=o({uri:a}),N=(0,ne.$P)(),E=(0,fe.g)(),R=(0,s.I0)(),D=(0,h.W6)(Fe.vWw,{loadingValue:!1}),{position:T,isFullyPlayed:B}=((e,t,a,s)=>{const n=(0,i.useRef)(null),[o,r]=(0,i.useState)(s),[l]=(0,He.z)(1e4,(t=>t?.item?.uri===e));return(0,i.useEffect)((()=>{a&&(n.current=l)}),[a,l]),(0,i.useEffect)((()=>{!a&&n.current&&t.milliseconds<=n.current+1e4&&r(!0)}),[a,t.milliseconds]),{position:a?l:null,isFullyPlayed:o}})(a,t,S,d);null!==T&&(P.current=T);const U=(0,i.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),F=(0,b.o)(),O=(0,i.useCallback)((e=>{if(U(e),v&&!E&&D)return void R((0,Ie.S3)(v));const t=y.chapterBlockFactory({position:f,uri:a}).playButtonFactory();if(r)F({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),N.logInteraction(t.hitShowPaywall({paywalledItem:a}));else{const e=(0,Ge.aK)({isPlaying:S,isActive:w,spec:t,logger:N,uri:a});I({loggingParams:e})}}),[v,R,f,D,w,E,r,S,N,F,y,U,I,a]),M=(0,i.useCallback)((()=>{const e=y.chapterBlockFactory({position:f,uri:a}).secondaryHitUiReveal();N.logInteraction(e)}),[f,N,y,a]),L=(0,i.useCallback)((e=>{U(e);const t=y.chapterBlockFactory({position:f,uri:a}).contextMenuFactory().hitUiReveal();N.logInteraction(t)}),[f,N,y,U,a]),_=!(r||v),z=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("hr",{className:Xe,"aria-hidden":!0}),(0,A.jsxs)("div",{className:Ke,onDoubleClick:e=>{F({targetUri:a,intent:"play",type:"double-click"}),O(e)},children:[(0,A.jsx)(m.D,{as:"h2",variant:"balladBold",className:p()($e,{[Ye]:w}),semanticColor:"textBase",children:e}),(0,A.jsxs)("div",{className:Je,children:[(0,A.jsx)($.f,{size:"small",version:$.u.secondary,onClick:O,isPlaying:S,ariaPlayLabel:c.ag.get("tracklist.a11y.play",e,n),ariaPauseLabel:c.ag.get("tracklist.a11y.pause",e,n),locked:r&&!v,disabled:!l&&!(r||v)}),g&&(0,A.jsx)(C.N,{fullText:!0}),x&&(0,A.jsx)(X.X,{size:16}),(0,A.jsx)("div",{className:Qe,children:(0,A.jsx)(Ve.E,{isPlaying:S,fullyPlayed:B,durationMs:t.milliseconds,resumePositionMs:P.current,position:T??void 0})})]}),_?(0,A.jsx)(he.ClickToggleContextMenu,{menu:(0,A.jsx)(k.r,{uri:a}),children:(0,A.jsx)(j.MoreButton,{className:Ze,size:j.q.sm,label:c.ag.get("more.label.context",e),onClick:L})}):null]})]});return _?(0,A.jsx)(he._,{menu:(0,A.jsx)(k.r,{uri:a}),onShow:M,children:(0,A.jsx)("div",{className:qe,children:z})}):(0,A.jsx)("div",{className:qe,children:z})}));var tt=a(96684),at=a(52542),it=a(84351),st=a(51087),nt=a(23123);const ot="XG_S4BkuyAMohXFLGKU1",rt="NrMNU3Sf4iy2c6JJx7R8",lt="n8V7RFwuVx9PaIT1n_mA",ct="kTtB_Y_yizhUj6SMYY8e",ut="f2XS5sEjEtvk4TdlzHK3",dt="d9YBRXX3qqxAD43sqNzE",gt="Jvp5er4UpzTljUao_SrR",pt="EQCGoB4MqhFPtwUwp1rh",mt="UTBQUpUwOPb37ou2ULmH",ht="Dnwv7PC1vjXvcwYEfqqf",xt=i.memo((function({name:e,duration:t,uri:a,bookName:n,usePlayContextItem:o,isChapterLocked:r,isPlayable:l,resumePositionMs:u,isFullyPlayed:d,isExplicit:g,is19PlusOnly:m,spec:x,index:y,consumptionCapExplanation:f}){const v=(0,i.useRef)(u),{isPlaying:P,togglePlay:S,isActive:I}=o({uri:a}),w=(0,ne.$P)(),N=(0,fe.g)(),E=(0,s.I0)(),R=(0,h.W6)(Fe.vWw,{loadingValue:!1}),D=(0,st.Y)((e=>{if(e?.item?.uri===a){const t=(0,nt.k)(e)??0;return v.current=t,t}return 0})),T=(0,i.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),B=(0,b.o)(),U=(0,i.useCallback)((e=>{if(T(e),f&&!N&&R)return void E((0,Ie.S3)(f));const t=x.chapterBlockFactory({position:y,uri:a}).playButtonFactory();if(r)B({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),w.logInteraction(t.hitShowPaywall({paywalledItem:a}));else{const e=(0,Ge.aK)({isPlaying:P,isActive:I,spec:t,logger:w,uri:a});S({loggingParams:e})}}),[f,E,y,R,I,N,r,P,w,B,x,T,S,a]),F=(0,i.useCallback)((()=>{const e=x.chapterBlockFactory({position:y,uri:a}).secondaryHitUiReveal();w.logInteraction(e)}),[y,w,x,a]),O=(0,i.useCallback)((e=>{T(e);const t=x.chapterBlockFactory({position:y,uri:a}).contextMenuFactory().hitUiReveal();w.logInteraction(t)}),[y,w,x,T,a]),M=!(r||f),L=(0,A.jsx)(tt.g,{className:p()({[rt]:I}),children:e}),_=(0,A.jsxs)("div",{className:dt,children:[r?(0,A.jsx)(it.g,{}):null,g&&(0,A.jsx)(C.N,{fullText:!0}),m&&(0,A.jsx)(X.X,{size:16}),(0,A.jsx)("div",{className:gt,children:(0,A.jsx)(Ve.E,{isPlaying:P,fullyPlayed:d,durationMs:t.milliseconds,resumePositionMs:v.current,position:P?D:void 0})})]}),z=(0,A.jsxs)("div",{className:mt,children:[(0,A.jsx)("div",{className:ht,children:M?(0,A.jsx)(he.ClickToggleContextMenu,{menu:(0,A.jsx)(k.r,{uri:a}),children:(0,A.jsx)(j.MoreButton,{className:ut,size:j.q.xs,label:c.ag.get("more.label.context",e),onClick:O})}):null}),(0,A.jsx)("div",{className:pt,children:(0,A.jsx)($.f,{size:"small",version:$.u.secondary,onClick:U,isPlaying:P,ariaPlayLabel:c.ag.get("tracklist.a11y.play",e,n),ariaPauseLabel:c.ag.get("tracklist.a11y.pause",e,n),locked:r&&!f,disabled:!l&&!(r||f)})})]}),W=(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("hr",{className:lt,"aria-hidden":!0}),(0,A.jsx)(at.w,{id:`chapter-${y}`,title:L,body:_,footer:z,onDoubleClick:e=>{B({targetUri:a,intent:"play",type:"double-click"}),U(e)},className:ot})]});return M?(0,A.jsx)(he._,{menu:(0,A.jsx)(k.r,{uri:a}),onShow:F,children:(0,A.jsx)("div",{className:ct,children:W})}):(0,A.jsx)("div",{className:ct,children:W})})),yt=({bookUri:e,bookName:t,sampleUri:a,isFinishedUnlockingJourney:s,usePlayContextItem:n,spec:o,consumptionCapExplanation:r})=>{const l=function(e,t){const a=(0,ze.z)();return(0,i.useCallback)((async(i,s)=>a.getBookContents(e,{offset:i,limit:s,doRefreshSubscription:t})),[t,a,e])}(e,s),c=(0,i.useRef)(!1),u=(0,i.useRef)(0),d=(0,h.W6)(Fe.eli,{loadingValue:!1}),[g,p]=(0,i.useState)([]),m=(0,i.useCallback)((e=>e?.uri===a),[a]),x=(0,i.useCallback)((e=>(e=>null!==e)(e)&&!m(e)),[m]),y=(0,i.useCallback)((()=>{l&&(c.current||null===u.current||(c.current=!0,l(u.current,50).then((e=>{c.current=!1,u.current=e.nextOffset,e.items.length>0&&p((t=>t.concat(e.items.filter(x))))}))))}),[l,x]);return(0,i.useEffect)((()=>{u.current=0,p([])}),[e]),(0,A.jsx)("ul",{children:(0,A.jsx)(_e.C,{onReachBottom:y,triggerOnInitialLoad:!0,children:g.map(((e,a)=>{const{name:i,duration:s,uri:l,playability:{playable:c},playedState:{playPositionMilliseconds:u,state:g},isExplicit:p,is19PlusOnly:m}=e,h=function(e){return!e.playability?.playable&&(e.playability?.reason===We.WY.PaymentRequired||e.playability?.reason===We.WY.Anonymous)}(e);return d?(0,A.jsx)(xt,{name:i,duration:s,uri:l,bookName:t,usePlayContextItem:n,isPlayable:c,isChapterLocked:h,consumptionCapExplanation:r,resumePositionMs:u,isFullyPlayed:g===We.sY.Completed,isExplicit:p,is19PlusOnly:m,spec:o,index:a},l):(0,A.jsx)(et,{name:i,duration:s,uri:l,bookName:t,usePlayContextItem:n,isPlayable:c,isChapterLocked:h,consumptionCapExplanation:r,resumePositionMs:u,isFullyPlayed:g===We.sY.Completed,isExplicit:p,is19PlusOnly:m,spec:o,index:a},l)}))})})};var jt=a(9401),kt=a(29651),bt=a(88354),ft=a(34997),vt=a(1541);const Pt="QEd1L2SSRW1ol_sQQN6m",Ct="ENuWK8u3C9kmadnqkErf",St="i0gSVhns0PjhiUKm4OG1",It="jKVb6K0dga3SfW1dp2Pg",wt="MOpV0_YizQER2NksxLju",Nt="vrR8bh9DvivyDfUrh1vD",Et="_toO3CqMPAPTbny7Rh8R",At="Iudw61HRePwOAJpbDRvA",Rt="GWaz1n1SADn9enzKdi_Z",Dt=i.memo((function({coverArt:e,toggleModal:t,uri:a,isBook:i}){const s=(0,ft.X)(e,{desiredSize:320}),{spec:n,logger:o}=(0,ne.fU)(kt.createDesktopPodcastRatingEventFactory,{data:{identifier:i?r.Wg.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK:r.Wg.RATINGS_AND_REVIEWS_RATINGS,uri:a}});return(0,A.jsx)(vt.Z,{contentLabel:"podcast-rating-modal",isOpen:!0,onRequestClose:t,children:(0,A.jsxs)("div",{className:Pt,children:[(0,A.jsxs)("div",{className:St,children:[(0,A.jsx)(m.D,{as:"h1",variant:"canon",className:Et,children:i?c.ag.get("web-player.audiobooks.rating.rateAudiobook"):c.ag.get("web-player.show.rating.header")}),(0,A.jsxs)("button",{className:It,onClick:()=>{const e=n.closeButtonFactory().hitUiNavigateBack();o.logInteraction(e),t()},children:[(0,A.jsx)(jt.k,{role:"presentation"}),(0,A.jsx)("span",{className:"hidden-visually",children:c.ag.get("web-player.audiobooks.rating.closeModal")})]})]}),(0,A.jsxs)("div",{className:wt,children:[(0,A.jsx)(bt.Ee,{loading:"eager",src:s?.url,className:Ct}),(0,A.jsxs)("div",{className:Nt,children:[(0,A.jsx)(m.D,{as:"p",variant:"cello",className:At,children:i?c.ag.get("web-player.audiobooks.rating.wantToRate"):c.ag.get("web-player.show.rating.want-to-rate")}),(0,A.jsx)(m.D,{as:"p",className:Rt,children:c.ag.get("web-player.audiobooks.rating.goToApp")}),(0,A.jsx)(ke.D,{colorSet:"invertedLight",onClick:()=>{const e=n.okButtonFactory().hitUiNavigateBack();o.logInteraction(e),t()},children:c.ag.get("web-player.audiobooks.rating.ok")})]})]})]})})})),Tt="mmCZ5VczybT9VqKB5wFU",Bt="At_ihDspJfh1yw3Cn2cq",Ut="u3LLJx1KnMchfNCzi6k5",Ft="Yqz1Nv6wj1n3HmXL_qji",Ot="qRqn3JrWLPbGW9k2a63n",Mt="HAah1_lK_dHgyyE71I8Z",Lt="eiC4nh70nb5UHZBYMgNA",_t="hl2eRCaYcZ1Jm1bgNYlU",zt="eYtmwXEvi1UdCevg8WoK",Wt="QOp2aYTYmZHZ6DFFHuYE",Vt={shuffle:!1,repeat:ie.zq.REPEAT_NONE},Gt=i.memo((function({metadata:e}){const{uri:t,coverArt:a,name:o,htmlDescriptionPlain:l,authorName:d,sample:g,narrators:S,rating:I,isExplicit:w,duration:N,copyrights:E,publishDate:T,price:B,isLocked:U,consumptionCapExplanation:F,signifierText:O,latestPlayedEpisodeLink:M}=e,{search:L}=(0,n.TH)(),_=!!new URLSearchParams(L).get("isUnlockingAudiobook"),z=!(!(0,te.D)(_)||_),W=(0,fe.g)(),V=(0,f.Z)(a[0]?.url),G=(0,s.I0)(),[H,K]=(0,i.useState)(!1),Y=(0,b.o)(),X=(0,h.W6)(Fe.vWw,{loadingValue:!1}),{spec:q,logger:Z}=(0,ne.fU)(x.createDesktopAudiobookEventFactory,{data:{uri:t,identifier:r.Wg.PODCAST_SHOW_AUDIOBOOK}}),{spec:$,logger:ie}=(0,ne.fU)(x.createDesktopAudiobookEventFactory,{data:{uri:t,identifier:r.Wg.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK}}),{spec:oe,logger:le}=(0,ne.fU)(y.createDesktopLockedAudiobookEventFactory,{data:{uri:t,identifier:r.Wg.PODCAST_SHOW_AUDIOBOOK}}),ce=(0,i.useMemo)((()=>q.actionBarFactory()),[q]),ue=(0,i.useMemo)((()=>$.aboutSectionFactory()),[$]),de=(0,i.useMemo)((()=>q.chapterListFactory()),[q]);(0,i.useEffect)((()=>{Y({type:"view",intent:"audiobook"})}),[Y]),(0,i.useEffect)((()=>{U&&le.logImpression(oe.impression())}),[oe,le,U]);const{isPlaying:ge,togglePlay:pe,usePlayContextItem:me,isActive:he,triggerPlay:xe}=(0,ae.n)({uri:t},{featureIdentifier:"audiobook"}),{togglePlay:ye,isPlaying:je,isActive:ke}=(0,ae.n)({uri:g?.uri??""},{featureIdentifier:"audiobook"}),be=ge&&!je,ve=he&&!ke,Pe=(0,i.useCallback)((async()=>{const e=q.actionBarFactory().playButtonFactory();if(F&&!W&&X)return Z.logInteraction(e.hitShowPaywall({paywalledItem:t})),void G((0,Ie.S3)(F));if(!U||W)if(W)pe(Vt);else{const a=(0,Ge.aK)({isPlaying:be,isActive:ve,spec:e,logger:Z,uri:t});ve?pe({...Vt,loggingParams:a}):xe({...Vt,skipTo:M?{uri:M}:void 0,loggingParams:a})}}),[q,F,W,X,U,Z,t,G,pe,be,ve,xe,M]),Ce=(0,i.useCallback)((()=>{g?.uri&&(Y({targetUri:g.uri,intent:je?"play":"pause",type:"click"}),ye())}),[je,Y,ye,g?.uri]),Se=(0,i.useCallback)((()=>{const e=ue.ratingButtonFactory().hitUiReveal();ie.logInteraction(e),K((e=>!e))}),[ue,ie]),we=(0,ee.jh)(),Ne=U&&!F&&B;return(0,A.jsxs)("section",{className:Tt,children:[(0,A.jsx)(u.$,{children:(0,se.Od)({showOrAudiobookName:o,type:"Audiobook"})}),(0,A.jsx)(Oe,{name:o,authorName:d,uri:t,coverArt:a,backgroundColor:V,togglePlay:Pe,isPlaying:be,isLocked:U,isConsumptionCapped:!!F,price:B,logger:Z,spec:q.actionBarFactory()}),(0,A.jsx)(Ae,{name:o,backgroundColor:V,uri:t,togglePlay:Pe,isPlaying:be,isLocked:U,showDownloadButton:!U||!!F,consumptionCapExplanation:F,isExplicit:w,duration:N,publishDate:T,price:B,spec:ce}),(0,A.jsxs)("div",{className:p()(Bt,"contentSpacing",{[Ut]:we===ee.Uo.LARGE}),children:[(0,A.jsxs)("div",{className:Ft,children:[(0,A.jsxs)("div",{className:_t,children:[(0,A.jsxs)("div",{className:zt,children:[w&&(0,A.jsx)(C.N,{fullText:!0}),(0,A.jsxs)("div",{children:[T&&(0,A.jsx)(m.D,{variant:"mesto",className:Wt,children:c.ag.formatDate(T)}),(0,A.jsx)(m.D,{variant:"mesto",children:(0,A.jsx)(D.nL,{durationMs:N})})]})]}),O&&(0,A.jsx)(m.D,{variant:"ballad",as:"p",semanticColor:"textBrightAccent",children:O}),!O&&Ne&&(0,A.jsx)(Le,{price:B})]}),(0,A.jsx)(re,{htmlDescription:l,narrators:S,spec:ue})]}),(0,A.jsxs)("div",{className:Ot,children:[g?.isPlayable&&g?.audio.items.length>0&&(0,A.jsx)(Q,{label:c.ag.get("audiobook.page.sample"),images:g.coverArt||[],title:g.name,duration:g.duration.milliseconds,moreButton:U?null:(0,A.jsx)(v.y,{menu:(0,A.jsx)(k.r,{uri:g.uri}),children:(0,A.jsx)(j.MoreButton,{})}),onClick:Ce,isPlaying:je,isActive:ke,size:J.LARGE,contentRating:g.contentRating?.label,isPlayable:g.isPlayable}),(0,A.jsx)("div",{className:Mt,children:(0,A.jsx)(R,{rating:I,onClick:Se})})]}),(0,A.jsxs)("div",{className:Lt,children:[(0,A.jsx)(yt,{bookUri:t,bookName:o,sampleUri:g?.uri,isFinishedUnlockingJourney:z,usePlayContextItem:me,spec:de,consumptionCapExplanation:F},`${t}-${U}-${!!F}`),(0,A.jsx)(P.k,{copyrights:E})]})]}),H&&(0,A.jsx)(Dt,{toggleModal:()=>K(!1),coverArt:a,uri:t,isBook:!0})]})}));var Ht=a(43699),Kt=a(90570),Yt=a(86733),Xt=a(58625),qt=a(46354);let Zt=function(e){return e.VIDEO_PODCAST_SHOW_TITLE_TAG="podcast-video-title-tag",e}({}),$t=function(e){return e.CONTROL="0",e.VARIANT="1",e}({});var Jt=a(15917),Qt=a(31269);const ea=({uri:e,name:t,backgroundColor:a,spec:s})=>{const n=(0,ne.$P)(),o=(0,b.o)(),r=!(0,Ee.k)(),[l,u]=(0,ue.Z)(e),d=(0,i.useCallback)((()=>{o({targetUri:e,intent:l?"unsave":"save",type:"click"});const t=s.followButtonFactory();n.logInteraction(l?t.hitUnfollow({itemToBeUnfollowed:e}):t.hitFollow({itemToBeFollowed:e})),u(!l)}),[o,e,l,s,n,u]),g=(0,i.useCallback)((()=>{n.logInteraction(s.contextButtonFactory().hitUiReveal())}),[n,s]),p=(0,Ne.j)();return(0,A.jsx)(le.o,{backgroundColor:a,children:(0,A.jsxs)(le.F,{children:[(0,A.jsx)(we.r,{children:(0,A.jsx)(Qt.e,{isFollowing:l,onClick:d,disabled:r})},"follow-button"),(0,A.jsx)(v.y,{menu:(0,A.jsx)(Jt.M,{uri:e}),onShow:g,children:(0,A.jsx)(j.MoreButton,{label:c.ag.get("more.label.context",t),size:p})})]})})},ta=(0,i.lazy)((()=>a.e(2516).then(a.bind(a,42516))));function aa(e){return(0,h.W6)(Fe.$f6)?(0,A.jsx)(i.Suspense,{fallback:!0,children:(0,A.jsx)(ta,{...e})}):null}var ia=a(41946),sa=a(10236),na=a(34483),oa=a(70231),ra=a(81471),la=a(24393),ca=a(15644),ua=a(54157);const da=(0,i.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),ga=i.memo((function({uri:e,children:t}){return(0,A.jsx)(ua.r,{uri:e,defaultState:[],sortContext:da,localStorageKey:"showFilterParams-v2",children:t})}));var pa=a(58856);const ma={field:pa.ay.PUBLISH_DATE,order:pa.i5.DESC},ha={field:pa.ay.PUBLISH_DATE,order:pa.i5.ASC},xa={episodic:ma,sequential:ha,recent:ma};function ya(){return new Map([[ma,{key:"newest-to-oldest",value:c.ag.get("shows.sort.newest-to-oldest")}],[ha,{key:"oldest-to-newest",value:c.ag.get("shows.sort.oldest-to-newest")}]])}function ja(e){return xa[e]}const ka=(0,i.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowSortProvider")},sortState:ja("recent")}),ba=e=>{const t=ya();return Array.from(t.keys()).some((({field:t})=>t===e?.field))},fa=i.memo((function({uri:e,children:t,defaultSortParam:a}){return(0,A.jsx)(ua.r,{uri:e,defaultState:a,sortContext:ka,localStorageKey:"showSortParam",validator:ba,children:t})})),va="cJJXVm4gQW6AdfCQRhpX",Pa="hTRqaN61SDG95erQGMmx",Ca={totalCount:0,nextOffset:0,items:[]},Sa=i.memo((function({showMetadata:e,usePlayContextItem:t}){const{sortState:a}=(0,i.useContext)(ka),{sortState:s}=(0,i.useContext)(da),n=(0,ra.ZM)(e.uri,a,s),[o,r]=(0,i.useState)(Ca),l=(0,i.useRef)(!1),c=(0,i.useRef)(0),u=(0,i.useCallback)(((e=!1)=>{if(!n)return;const t=c.current;null!==t&&(l.current||(l.current=!0,n(t,50).then((a=>{r((i=>{const s=e?[]:[...i.items];return s.splice(t,a.items.length,...a.items),c.current=a.nextOffset,{...a,items:s}})),l.current=!1}))))}),[n]);return(0,i.useEffect)((()=>{r(Ca)}),[e.uri]),(0,i.useEffect)((()=>{c.current=0,u(!0)}),[u]),(0,A.jsx)(ca.ZP,{value:"track-list",children:(0,A.jsx)(_e.C,{onReachBottom:u,triggerOnInitialLoad:!0,children:o.items.map(((a,i)=>a&&(0,A.jsxs)("div",{className:Pa,children:[(0,A.jsx)("hr",{className:va,"aria-hidden":!0}),(0,A.jsx)(la.V,{index:i,episode:a,showMetadata:e,usePlayContextItem:t},`${a.uri}/${i}`)]},`${i}${a.uri}`)))})})}));var Ia=a(43686);const wa={field:pa.YG.ISPLAYED,operator:pa.NK.EQUALS,value:!1},Na={field:pa.YG.STARTEDPLAYING,operator:pa.NK.GREATER_THAN,value:0};const Ea="all-episodes",Aa=({onFilter:e})=>{const{sortState:t,setSortState:a}=(0,i.useContext)(da),s=new Map([[wa,{key:"is-played",value:c.ag.get("shows.filter.unplayed")}],[Na,{key:"started-playing",value:c.ag.get("shows.filter.in-progress")}]]),n=Array.from(s.values());n.unshift({key:Ea,value:c.ag.get("mwp.podcast.all.episodes")});const o=Array.from(s.keys()),r=(0,i.useCallback)((t=>{if(t===Ea)a([]);else{const e=o.find((e=>s.get(e)?.key===t));e&&a([e])}e()}),[e,a,o,s]);if(!s.size||!o)return null;let l=n[0];const u=Array.from(s.entries()).filter((e=>t?.some((t=>t.field===e[0].field&&t.operator===e[0].operator))));return u.length>0&&(l=u[0][1]),(0,A.jsx)(Ia.A,{options:n,onSelect:e=>r(e),selected:l,variant:"balladBold",semanticColor:"textBase",heading:c.ag.get("drop_down.filter_by")})},Ra=({onSort:e})=>{const{sortState:t,setSortState:a}=(0,i.useContext)(ka),s=ya(),n=Array.from(s.values()),o=Array.from(s.keys()),r=(0,i.useCallback)((t=>{const i=o.find((e=>s.get(e)?.key===t));i&&a(i),e()}),[o,e,s,a]);if(!s.size||!t)return null;const l=Array.from(s.keys()).find((e=>e.field===t.field&&e.order===t.order));if(!l)return null;const u=s.get(l);return u?(0,A.jsx)(Ia.A,{options:n,onSelect:e=>r(e),selected:u,heading:c.ag.get("drop_down.sort_by")}):null},Da="show-showPage-sectionWrapper",Ta="TYB4Y2xQujO7cifhHush",Ba="sSXKiPRvp2AHmwfHoCCS",Ua="YJlizbhw6DBPHT9OYbdj",Fa="TfjbWiK8hca4HHEBnonP",Oa="kR0M2WSYVUj4cohADSFM",Ma="ghfuv80I8uW_ymG_jfx9",La="jtfSxoRam9rzTtdXIjzc",_a="fejGrhq7pxGC99cUdyVw",za="T0OjvsNXAJJGd23eBG2m",Wa="Ppm5YkDdE5ktTPwZC1Dw",Va="urKYEVZPj2k0hwDT1qzt",Ga=({spec:e})=>{const t=(0,ne.$P)(),{canSort:a,canFilter:s}=(0,ra.zZ)().capabilities,n=(0,i.useCallback)((()=>{t.logInteraction(e.episodeListFactory().filterButtonFactory().hitFilter())}),[t,e]),o=(0,i.useCallback)((()=>{t.logInteraction(e.episodeListFactory().sortButtonFactory().hitSort())}),[t,e]);return(0,A.jsxs)("div",{className:Oa,children:[s&&(0,A.jsx)("div",{className:La,children:(0,A.jsx)(Aa,{onFilter:n})}),!s&&(0,A.jsx)(m.D,{as:"h3",variant:"canon",semanticColor:"textBase",className:_a,children:c.ag.get("mwp.podcast.all.episodes")}),a&&(0,A.jsx)("div",{className:Ma,children:(0,A.jsx)(Ra,{onSort:o})})]})},Ha=e=>{switch(e){case We.it.TRAILER:return c.ag.get("podcasts.next-episode.trailer");case We.it.UP_NEXT:return c.ag.get("podcasts.next-episode.up-next");case We.it.CONTINUE_LISTENING:return c.ag.get("podcasts.next-episode.continue-listening");case We.it.FIRST_PUBLISHED:return c.ag.get("podcasts.next-episode.first-published");case We.it.LATEST_PUBLISHED:return c.ag.get("podcasts.next-episode.latest-published");default:return}},Ka=({breakpoint:e,metadata:t,showId:a,spec:s})=>{const{uri:n,trailer:o,topics:r,description:l,htmlDescription:u,coverArt:d,rating:g}=t,x=(0,ne.$P)(),y=(0,i.useMemo)((()=>s.episodeListFactory()),[s]),[k,f]=(0,i.useState)(!1),C=(0,h.W6)(Fe.VzO),S=(0,b.o)(),I=(0,fe.g)(),{sortState:w}=(0,i.useContext)(ka),{sortState:N}=(0,i.useContext)(da),E=(0,ra.zZ)(),{usePlayContextItem:D}=(0,ae.n)({uri:n,metadata:{[ie.sb.SORTING_CRITERIA]:E.getPlayerSort(w),[ie.sb.FILTERING_PREDICATE]:E.getPlayerFilter(N)}},{featureIdentifier:"show"}),{isActive:T,isPlaying:B,togglePlay:U}=D({uri:o?.uri||""}),F=(0,i.useCallback)((e=>{S({intent:"expand-description",type:"click"});const t=s.aboutSectionFactory().seeMoreButtonFactory(),a=e?t.hitUiReveal():t.hitUiHide();x.logInteraction(a)}),[x,S,s]),O=(0,i.useCallback)(((e,t)=>{const a=s.aboutSectionFactory().topicFactory(t).hitUiNavigate({destination:t.uri});x.logInteraction(a)}),[x,s]),M=o?{name:o.name,uri:o.uri,audio:{items:o.audio.items.map((e=>({url:e.url})))}}:null,L=(0,la.e)(t),_=(0,na.s)(M,L),z=(0,i.useCallback)((()=>{o?.uri&&(I?_():(S({targetUri:o.uri,intent:B?"play":"pause",type:"click"}),U()))}),[_,I,B,S,U,o?.uri]),{ref:W,breakpoint:V}=(0,ee.Db)({[ee.Uo.MEDIUM]:0,[ee.Uo.LARGE]:600}),G=r.length>0,H=l||u,K=H||G;return(0,A.jsxs)("div",{className:p()(Ta,"contentSpacing",{[Ba]:e===ee.Uo.LARGE}),ref:W,children:[(0,A.jsxs)("div",{className:Ua,children:[K&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(m.D,{as:"h3",variant:"canon",semanticColor:"textBase",className:_a,children:c.ag.get("artist.about")}),H&&(0,A.jsx)(oe.o,{maxLines:4,content:(l||"").trim(),onExpanded:F,htmlContent:u||void 0}),g&&(0,A.jsx)("div",{className:Va,children:(0,A.jsx)(R,{rating:g,onClick:()=>f(!0)})}),G&&(0,A.jsx)(sa.v,{topics:r,onClick:O})]}),(0,A.jsx)(aa,{showId:a,uri:n}),o&&!C&&(0,A.jsx)(oa._,{menu:(0,A.jsx)(ia.k,{uri:o.uri,showUri:n,sharingInfo:o.sharingInfo}),children:(0,A.jsx)(Q,{label:c.ag.get("track-trailer"),className:za,images:o.coverArt||[],title:o.name,duration:o.duration.milliseconds,moreButton:(0,A.jsx)(v.y,{menu:(0,A.jsx)(ia.k,{uri:o.uri,sharingInfo:o.sharingInfo,showUri:n}),children:(0,A.jsx)(j.MoreButton,{})}),onClick:z,isPlaying:B,isActive:T,size:J.LARGE,contentRating:o.contentRating?.label})})]}),(0,A.jsx)(ee.ZU.Provider,{value:V,children:(0,A.jsxs)("div",{className:Fa,"data-testid":"show-all-episode-list",children:[C&&t.nextBestEpisode&&(0,A.jsx)(la.V,{showMetadata:t,episode:t.nextBestEpisode.data,usePlayContextItem:D,status:Ha(t.nextBestEpisode.type),variant:"next-best-episode"}),(0,A.jsx)(Ga,{spec:s}),(0,A.jsx)(ne.Nh,{spec:y,children:(0,A.jsx)(Sa,{showMetadata:t,usePlayContextItem:D})})]})}),(0,A.jsx)(P.k,{copyrights:[]}),k&&(0,A.jsx)(Dt,{toggleModal:()=>f(!1),coverArt:d,uri:n,isBook:!1})]})},Ya=i.memo(Ka);var Xa=a(39815);const qa=({reason:e})=>{const t=(0,h.W6)(Fe.ALT),a=function(e){switch(e){case"OTP":return c.ag.get("podcasts.subscriber-indicator.otp");case"SUBSCRIPTION":return c.ag.get("podcasts.subscriber-indicator.subscription");default:return""}}(e);return t&&a?(0,A.jsx)(m.D,{className:Wa,children:a}):null};const Za=({metadata:e,backgroundColor:t})=>{const{uri:a,coverArt:i,name:s,podcastType:n,publisherName:o,gatedContentAccessReason:r}=e,l=(0,h.W6)(Fe.vyX,{loadingValue:!1});return(0,A.jsxs)(Re.gF,{backgroundColor:t,children:[(0,A.jsx)(De.W,{children:(0,A.jsx)(Te.i,{text:s,dragUri:a,dragLabel:s})}),(0,A.jsx)(Xa.k,{children:(0,A.jsx)(oa._,{menu:(0,A.jsx)(Jt.M,{uri:a}),children:(0,A.jsx)(Re.Oe,{loading:"eager",name:s,images:i,placeholderType:"show",shape:l?Re.Kc.SQUARE:Re.Kc.ROUNDED_CORNERS})})}),(0,A.jsxs)(Re.sP,{children:[(0,A.jsxs)(Be.g,{children:["SHOW"===n?c.ag.get("type.show"):c.ag.get("type.podcast"),r&&(0,A.jsx)(qa,{reason:r})]}),(0,A.jsx)(oa._,{menu:(0,A.jsx)(Jt.M,{uri:a}),children:(0,A.jsx)(Re.xd,{dragUri:a,dragLabel:s,scaleAtMinWidth:Re.vz,children:(0,A.jsx)("span",{"data-testid":"show-title",children:s})})}),(0,A.jsx)(Ue.m,{children:o})]})]})};const $a=(0,a(23055).P1)((e=>e.seoExperiment),(e=>e?.[U.p.SHOW]));var Ja=a(74903);const Qa=({metadata:e,showId:t})=>{const{coverArt:a,name:r,uri:l}=e,{spec:c}=(0,ne.fU)(o.createDesktopPodcastEventFactory,{data:{uri:l}}),d=(0,i.useMemo)((()=>c.actionBarFactory()),[c]),g=(0,f.Z)(a[0]?.url||null),p=(0,ee.jh)(),m=((e,t)=>(({treatment:e,entityId:t,experimentId:a,treatmentVariation:i})=>{if(e&&e[t]){const s=e[t];return s.experimentId===a&&s.treatment===i}return!1})({treatment:e,entityId:t,experimentId:Zt.VIDEO_PODCAST_SHOW_TITLE_TAG,treatmentVariation:$t.VARIANT}))((0,s.v9)($a),t),h=(0,n.TH)(),x=(0,Kt.vI)(qt.k.VideoPodcastShowTitleTag,h),y=m||x;return(0,A.jsxs)("section",{className:Da,children:[(0,A.jsx)(u.$,{children:(0,se.Od)({showOrAudiobookName:r,type:"Podcast",isVideoPodcastShowTitleTagEnabled:y})}),(0,A.jsx)(Za,{metadata:e,backgroundColor:g}),(0,A.jsx)(ea,{uri:l,name:r,backgroundColor:g,spec:d}),(0,A.jsx)(Ya,{breakpoint:p,metadata:e,showId:t,spec:c})]})},ei=(0,i.memo)((function(){const{showId:e=""}=(0,n.UO)(),t=`spotify:show:${e}`,{data:a,error:s,redirectUri:o}=(0,Xt.l)(t);if(o){const e=(0,l._b)(o);return(0,A.jsx)(Ht.InstrumentedRedirect,{to:e.toURLPath(!0)})}return!a||s?s instanceof Yt.E?(0,A.jsx)(d.h,{hasError:!0,errorMessage:c.ag.get("error-page.not-available-in-region.title")}):(0,A.jsx)(d.h,{hasError:!!s,errorMessage:c.ag.get("error.not_found.title.page")}):(0,We.l6)(a)?(0,A.jsx)(i.Suspense,{fallback:null,children:(0,A.jsx)(Ja.C,{pageId:r.Wg.PODCAST_SHOW_AUDIOBOOK,uri:t,children:(0,A.jsx)(Gt,{metadata:a},`${!!a.consumptionCapExplanation}`)})}):(0,A.jsx)(i.Suspense,{fallback:null,children:(0,A.jsx)(Ja.C,{pageId:r.Wg.PODCAST,uri:t,children:(0,A.jsx)(ga,{uri:a.uri,children:(0,A.jsx)(fa,{uri:a.uri,defaultSortParam:ja(a.consumptionOrder),children:(0,A.jsx)(Qa,{showId:e,metadata:a})})})})})}))},62768:(e,t,a)=>{a.d(t,{k:()=>o});var i=a(51697);const s="rTMkDBDp47Eo12ZEQv4U";var n=a(4637);const o=({copyrights:e,courtesyLine:t})=>{const a=(e||[]).map(((e,t)=>{const a=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(Â©\s+)/,"").replace(/^(â„—\s+)/,"");let s;return s="C"===e.type?"Â©":"P"===e.type?"â„—":`(${e.type})`,(0,n.jsx)(i.D,{as:"p",variant:"finale",dir:"auto",children:`${s} ${a}`},t)}));return t&&a.unshift((0,n.jsx)(i.D,{as:"p",variant:"finale",dir:"auto",children:t},a.length)),(0,n.jsx)("div",{className:s,children:a})}},90570:(e,t,a)=>{a.d(t,{vI:()=>i});const i=(e,t)=>{const a=t?new URLSearchParams(t.search):void 0;return"1"===a?.get(e)}},46354:(e,t,a)=>{a.d(t,{k:()=>i});let i=function(e){return e.I18nSEO="i18nSEO",e.RTPTrackCredits="rtpv2p2",e.BlendParty="bp",e.BlendPartyV2="bpv2",e.VideoPodcastShowTitleTag="vidpodshow",e.I18nAdditionalPages="i18nap",e.IlrTrackCanonicalTop="ilr-track-canonical-top",e.IlrTrackCanonicalBottom="ilr-track-canonical-bottom",e.IlrTrackOrganicTop="ilr-track-organic-top",e.IlrTrackOrganicBottom="ilr-track-organic-bottom",e.RichPlaylistPages="rpp",e.GenerativeAIContent="genai",e}({})}}]);
//# sourceMappingURL=xpui-routes-show.js.map