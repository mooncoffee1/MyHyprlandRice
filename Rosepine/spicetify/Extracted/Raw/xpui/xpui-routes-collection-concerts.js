"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5835],{94957:(e,t,a)=>{a.d(t,{Z:()=>D});var n=a(59496),s=a(51697),o=a(6360),r=a(30099),i=a(67490),c=a(40022),l=a(62510),d=a(59699),m=a(39589),g=a(37209);const u="MUiWCNTfb6FcSwVPvQ1V",h="UAk3bMhekwJTV_wIyfsT",p="X9w6LPfKsZHMCs38sVIQ",v="NXn5KjeUOjLGlAfS1Gao",f="N0wgFMDDvCiby4QB5kLJ",x="nloNe2BLRHjz9dxlwfLU",j="FyD0hF1e2PKzRxQ6sYDQ",y="JzXND83mXvcEuntCNR34",_="GR08E4L_rOGljyQQX30R";var N=a(4637);const D=(0,n.memo)((e=>{const{concert:t,isVirtual:a,onClick:n}=e,{venue:D,location:b}=t,w=t.artists[0],k=(0,m.CH)(t.startDate.localDate);return(0,N.jsxs)(i.Link,{to:`/concert/${t.id}`,className:u,"data-testid":"concert-card",onClick:n,children:[w.imageUri&&(0,N.jsx)(c.Z,{children:(0,N.jsx)("div",{role:"img",className:_,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${w.imageUri})`}})}),(0,N.jsx)("time",{className:h,dateTime:t.startDate.localDate,children:(0,N.jsx)(s.D,{as:"div",variant:"mestoBold",children:(0,m.jx)(k)})}),(0,N.jsxs)("div",{className:p,dir:"auto",children:[(0,N.jsxs)(s.D,{as:"p",className:y,variant:"mesto",children:[(0,l.FO)(k)," • ",(0,m.hK)(k)]}),(0,N.jsx)(s.D,{as:"h2",variant:"cello",weight:"bold",className:v,children:(0,g.ij)(t)}),(0,N.jsxs)("div",{className:f,children:[(0,d.$R)(t)&&(0,N.jsx)("span",{className:j,children:(0,N.jsx)(o.V,{iconSize:16})}),(0,N.jsx)(s.D,{as:"span",className:x,variant:"mesto","data-testid":"location-name",children:a?D:[D,b].join(r.ag.getSeparator())})]})]})]})}))},59699:(e,t,a)=>{a.d(t,{$R:()=>c,DF:()=>g,Vv:()=>d,ie:()=>u,k9:()=>i,pm:()=>m,sk:()=>l,yI:()=>o});var n=a(85487),s=a(67898);const o=(e,t)=>{if(!e)return"/concerts";const a=t?.normalize().replaceAll(/\W+/g,"-");return a?`/concerts/location/${e}-${a}`:`/concerts/location/${e}`},r=10;function i(e){if(0===e.length)return[];if(0===e[0].events.length)return[];const t=[];let a={date:e[0].events[0].openingDate.slice(0,r),events:[]};for(const n of e)for(const e of n.events){const n=e.openingDate.slice(0,r);a.date!==n&&(t.push(a),a={date:n,events:[]}),a.events.push(e)}return t.push(a),t}const c=e=>e.ticketers.some((e=>"spotify"===e.partnerDisplayName.toLowerCase())),l=e=>e.concerts.some((({concert:e})=>c(e))),d=e=>{const t=new Date(e);t.setDate(e.getDate()+(6-e.getDay()));const a=new Date(t);return a.setDate(t.getDate()+1),{from:t,to:a}},m=e=>{const t=new Date(e);t.setDate(e.getDate()+(6-e.getDay()));const a=new Date(t);a.setDate(t.getDate()+7);const n=new Date(a);return n.setDate(a.getDate()+1),{from:a,to:n}},g=(e,t)=>!!(e?.from&&e?.to&&t?.from&&t?.to)&&((0,n.Z)(e.from,t.from)&&(0,n.Z)(e.to,t.to)),u=e=>(0,s.Z)(e,{representation:"date"})},52077:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Aa});var n=a(59496),s=a(83792),o=a(97601),r=a(21043),i=a(93660),c=a(10390),l=a(11030),d=a(2541),m=a(6285),g=a(24234),u=a(34045),h=a(9990),p=a(85118),v=a(30099),f=a(47068),x=a(7018),j=a(20456),y=a(29915),_=a(7554),N=a(34046),D=a(46441),b=a(85487),w=a(51697),k=a(29919),C=a(28360),I=a(17584),S=a(70304),F=a(62926),E=a(75132),U=a(854),L=a(7138),M=a(22920),O=a(6360),P=a(9401),$=a(59674),A=a(1541),G=a(67490),W=a(59699),B=a(39589),R=a(37209);const z="cELOd04or4B6BbTbNWA7",H="CHJYbX33oDik9u4n4ohH",T="woQ0wEe6FL4lsGW05bsb",V="KTDREr8pDWjrmnzXzZ2z",Q="UUTvdEOH2v_rejoXdl9Z",K="cBbTozR921ppaoNZP0Uh",Z="SNyyQ0t_VvlWzzB9li7v",J="lwO4iko6mhCUgZN1s9AW",X="akvZI06vqHOow1pOL29J",q="WWZp3WM0maWJzl2qWEHE",Y="YdkAHxbDekz9SiAxHG6M",ee="AK37djOBJ2BuJOGuG1kQ",te="JfYURQbEA_ntMsMZV6tK",ae="du0mOGaZfHg3hsHwRMIu",ne="Rvzy4ltiiHIp9mvlxf0c",se="uEXt8BtfJCONUNVYrAHn";var oe=a(4637);const re=(0,n.memo)((e=>{const{concert:t,position:a,modalSpec:s}=e,{id:o,venue:r,location:i}=t,c=t.startDate.localDate,l=(0,B.CH)(c),d="ONLINE"===t.category,m=(0,n.useMemo)((()=>s?.eventRowFactory({position:a,uri:`spotify:concert:${t.id}`})),[s,a,t]),g=(0,N.$P)();return(0,oe.jsxs)(G.Link,{to:`/concert/${t.id}`,className:J,onClick:()=>{m&&g.logInteraction(m.hitUiNavigate({destination:`/concert/${o}`}))},children:[(0,oe.jsxs)("div",{className:X,"aria-hidden":!0,children:[(0,oe.jsx)(w.D,{as:"div",variant:"finaleBold",className:q,children:(0,B.jw)(l)}),(0,oe.jsx)(w.D,{as:"div",variant:"cello",className:Y,children:(0,B.wf)(l)})]}),(0,oe.jsxs)("div",{className:ee,children:[(0,oe.jsx)(w.D,{as:"div",variant:"violaBold",className:te,"data-testid":"event-title",children:(0,R.Yl)(t)}),(0,oe.jsx)(M.T,{children:(0,B.jx)(l)}),(0,oe.jsxs)(w.D,{as:"div",variant:"viola",className:ae,children:[(0,B.FO)(l)," • ",(0,B.hK)(l)]}),(0,oe.jsx)("span",{className:se,children:(0,W.$R)(t)&&(0,oe.jsx)(O.V,{iconSize:16})}),(0,oe.jsx)(w.D,{as:"div",variant:"viola",className:ne,"data-testid":"event-venue",children:d?r:[r,i].join(v.ag.getSeparator())})]})]},t.id)})),ie=(0,n.memo)((e=>{const{event:t,locationName:a,onClose:s,feedSpec:o}=e,r=t?.concerts[0]?.concert,i=r?.artists[0],c=(0,n.useMemo)((()=>o?.groupedEventModalFactory({uri:i?.uri||""})),[o,i]),l=(0,N.$P)(),d=(0,N.Wi)(c);if(!t||!r||!i)return null;const m=()=>{c&&l.logInteraction(c.closeButtonFactory().hitUiHide()),s()};return(0,oe.jsx)(A.Z,{contentLabel:v.ag.get("live_events.label"),isOpen:!0,className:z,onRequestClose:m,children:(0,oe.jsxs)("section",{className:H,ref:d,children:[(0,oe.jsx)("div",{className:T,children:(0,oe.jsx)(ce,{"aria-label":v.ag.get("close"),iconOnly:P.k,buttonSize:"sm",onClick:m})}),(0,oe.jsxs)("div",{className:V,children:[(0,oe.jsx)($.E,{height:"48",width:"48",className:Q,src:i.imageUri}),(0,oe.jsxs)("div",{className:K,children:[(0,oe.jsx)(w.D,{as:"h3",variant:"cello",className:Z,"data-testid":"event-venue",children:i.name}),(0,oe.jsx)(w.D,{as:"h3",variant:"mesto","data-testid":"event-venue",children:`${v.ag.get("concerts.count_near_location",t.concerts.length,a)}`})]})]}),t.concerts.map(((e,t)=>(0,oe.jsx)(re,{concert:e.concert,position:t,modalSpec:c},e.concert.id)))]})})}));var ce=(0,L.ZP)(m.o).withConfig({displayName:"ConcertFeedGroupedModal___StyledButtonTertiary",componentId:"sc-1o845wh-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"}),le=a(9102),de=a(90326),me=a(76925);const ge=async()=>(await(0,me.rD)(de.b.getInstance())).body,ue=e=>{const[,{geonameId:t}]=e.queryKey;return(async e=>(await(0,me.$0)(de.b.getInstance(),e)).body)(t)},he=e=>{const[,,t]=e.queryKey;return(async(e=1,t)=>{const{geonameId:a,startDate:n,endDate:s}=t;return(await(0,me.ij)(de.b.getInstance(),{page:e,geonameId:a,startDate:n,endDate:s})).body})(e.pageParam,t)},pe=e=>{const[,,{geonameId:t}]=e.queryKey;return(async e=>(await(0,me.YA)(de.b.getInstance(),void 0,e)).body)(t)},ve=e=>{const[,,{geonameId:t}]=e.queryKey;return(async e=>(await(0,me.wr)(de.b.getInstance(),e)).body)(t)},fe=6e5,xe=e=>(0,le.useQuery)(["concerts","spotify",{geonameId:e}],ve,{staleTime:fe,keepPreviousData:!0}),je=/^(\d+)/,ye=e=>{const t=e?.match(/(202\d)-([01]\d)-([0-3]\d)/);if(!t)return;const[,a,n,s]=t;return new Date(parseInt(a,10),parseInt(n,10)-1,parseInt(s,10))},_e=e=>{const t=(()=>{const{location:e}=(0,o.UO)(),[,t]=e?.match(je)||[];if(t)try{return parseInt(t,10)}catch(e){return}})(),[a]=(0,r.lr)(),n=a.get("filter")?.trim();return e.isAnonymous&&!n||"all"===n?{type:"all",geonameId:t}:e.isInterestedEnabled&&"saved"===n?{type:"saved"}:"first_party"===n?{type:"first_party",geonameId:t}:{type:"foryou",geonameId:t}};var Ne=a(50397),De=a(18112),be=a(47948);const we="MVPegsivznZB6gdkcnkH",ke="MlK79hskRbFrN2OBjMkl",Ce="VxaXFH9Uq1NU0LtsVhIu",Ie="UDVDNa40iTSPS9uHCG7Q",Se="vktIWsUczavLRrl4SkRt",Fe="Y1JeRPqrmHKXI1KcstYN",Ee="ofURwIKv0qEXJGTraIis",Ue="fN_lJHkYih9H3j9YSEzS",Le="LOJZO2MnGW5dCIawF767",Me="tyc7QRlEJigVFIAeLGOB",Oe="PoljWhTLU3MKqIx2gSPY",Pe="ajxCNAuBJSgYfKUUBWBT",$e="WR2h2Li5XTrBn_Rdme_k",Ae="WNhsvOyu4doInF525pLE",Ge="qSR4imCvzdznIQ4F2kBO",We="BCDMgFFqzEyzC1UqkW3t",Be="jFxUCv1gagc6erXmpgYw",Re="XOS1JS9iDK8dgeF3GeL5",ze="LNAJMvRlTPqWsmZvV7Kg",He="jP10ZUl0Jn2Ijue3fZux",Te="ncN9bwTgIRk6xruAt5T8",Ve="hKG8XDR5S00bjBAibgbI",Qe="XMhrCtHCVSPsNW67vM1m",Ke="ph1v4Hca5HU_zyl6Sfzz",Ze=(0,n.memo)((e=>{const{geonameId:t,locationName:a,spec:s}=e,[o,r]=(0,n.useState)(!1),i=(0,N.Wi)(s),c=`https://concerts.spotifycdn.com/feed_city_images_1/${t}.jpg`;return(0,n.useEffect)((()=>{const e=()=>{r(!0)},t=()=>{r(!1)},a=new Image;return a.addEventListener("load",e),a.addEventListener("error",t),a.src=c,()=>{a.removeEventListener("load",e),a.removeEventListener("error",t)}}),[c]),(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsxs)("div",{className:Ve,ref:i,children:[o&&(0,oe.jsx)($.E,{src:c,className:Qe,circle:!0,imageHeight:"56px",imageWidth:"56px"}),(0,oe.jsxs)("div",{children:[(0,oe.jsx)(w.D,{variant:"ballad",semanticColor:"textSubdued",as:"p",children:v.ag.get("live_events.city_info_find_tickets",a)}),(0,oe.jsx)(w.D,{variant:"ballad",semanticColor:"textSubdued",as:"p",children:v.ag.get("live_events.city_info_view_details")})]})]})})}));var Je=a(37638),Xe=(a(921),a(98484)),qe=a(28642);const Ye="eFIu3aQJuKmf6H4Lb18K",et="LPNL3DZ89Iisp8TMArD3",tt="moVCbo9Ao5YJ5PsH4Qdz",at="URXDMjhb8pQWIDaBrCPC",nt="a3oYct1knu9af60A0v6g",st="qbIrubbolsixlgVkhO5r",ot="xHihsEV_0W6kpm0wHsXA",rt="T8po_YH39Q9dhAsLAhec",it={formatCaption:e=>v.ag.formatDate(e,{month:"long",year:"numeric"}),formatDay:e=>v.ag.formatDate(e,{day:"numeric"}),formatWeekdayName:e=>v.ag.formatDate(e,{weekday:"short"})},ct=(0,n.memo)((e=>{const{onDone:t,onClose:a,spec:s}=e,[o,r]=(0,n.useState)(e.dateRange),i=(0,qe.S)(),c=(0,N.Wi)(s),l=(0,N.$P)(),d=new Date,g=(0,W.Vv)(d),u=(0,W.pm)(d),h=(0,W.DF)(o,g),p=(0,W.DF)(o,u);return(0,oe.jsx)("div",{ref:c,children:(0,oe.jsx)(A.Z,{isOpen:!0,children:(0,oe.jsxs)("section",{className:Ye,children:[(0,oe.jsx)(m.o,{className:et,iconOnly:P.k,size:"small",onClick:a,"aria-label":v.ag.get("close_button_action")}),(0,oe.jsxs)("div",{className:tt,children:[(0,oe.jsx)(w.D,{as:"h3",variant:"cello",children:v.ag.get("live_events.date_picker_dialog_title")}),(0,oe.jsxs)("div",{className:at,children:[(0,oe.jsx)(I.A,{className:nt,size:"md",selectedColorSet:"brightAccent",selected:h,onClick:()=>{r(h?void 0:g),s&&l.logInteraction(s.datePresetButtonFactory({identifier:"thisWeekend",position:0}).hitUiSelect())},children:v.ag.get("live_events.this_weekend_preset")}),(0,oe.jsx)(I.A,{className:nt,size:"md",selectedColorSet:"brightAccent",selected:p,onClick:()=>{r(p?void 0:u),s&&l.logInteraction(s.datePresetButtonFactory({identifier:"nextWeekend",position:1}).hitUiSelect())},children:v.ag.get("live_events.next_weekend_preset")})]})]}),(0,oe.jsx)(Je._W,{mode:"range",selected:o,onSelect:r,numberOfMonths:2,defaultMonth:e.dateRange?.from,fromDate:new Date,formatters:it,dir:i?"rtl":"ltr",modifiersClassNames:{today:st}}),(0,oe.jsxs)("div",{className:ot,children:[(0,oe.jsx)(m.o,{className:rt,size:"small",onClick:()=>{r(void 0)},disabled:!o?.from,children:v.ag.get("live_events.date_picker_dialog_clear")}),(0,oe.jsx)(Xe.D,{size:"small",onClick:()=>{if(o?.from){const{from:e,to:a}=o;t({from:e,to:a||e})}else t()},children:v.ag.get("live_events.date_picker_dialog_done")})]})]})})})}));var lt=a(14887),dt=a(94957),mt=a(40022);const gt="pU4WoqT8T6PmtjPbFtK0",ut="FC5Y_KFJ9rJyTpydqtOW",ht="AAYLcavkBdCuebn9AQxT",pt="lYHCmxpdReachiOORWGo",vt="JtKEdtTtcK7s6EpGecaC",ft="XuH9DoZCf0aVJ2BxQkTB",xt="myHDa69cI5CHC8fhIhkG",jt=(0,n.memo)((e=>{const{event:t,onClick:a}=e,s=(0,n.useCallback)((()=>a(t)),[t,a]),o=(0,B.CH)(t.openingDate),r=(0,B.CH)(t.closingDate),i=t.concerts[0].concert,c=i.artists[0];return(0,oe.jsxs)(m.o,{onClick:s,className:gt,component:"div","data-testid":"concert-card",role:"button",children:[c.imageUri&&(0,oe.jsx)(mt.Z,{children:(0,oe.jsx)("div",{role:"img",className:xt,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${c.imageUri})`}})}),(0,oe.jsx)("time",{className:ut,dateTime:o.toISOString(),children:(0,oe.jsx)(w.D,{as:"p",variant:"mestoBold",children:(0,B.Bc)(o,r)})}),(0,oe.jsxs)("div",{className:ht,dir:"auto",children:[(0,oe.jsx)(w.D,{as:"h2",variant:"cello",weight:"bold",className:pt,children:(0,R.ij)(i)}),(0,oe.jsxs)("div",{className:vt,children:[(0,W.sk)(t)&&(0,oe.jsx)("span",{className:ft,children:(0,oe.jsx)(O.V,{iconSize:16})}),(0,oe.jsx)(w.D,{as:"span",variant:"mesto","data-testid":"concerts-count",children:v.ag.get("concerts.count",t.concerts.length)})]})]})]})})),yt=(0,n.memo)((e=>{const{event:t,position:a,sectionSpec:s,onOpenGroupedEvent:o}=e,r=t.concerts[0]?.concert,i=r?.id,c=r&&(0,lt.g3)(r.id).toURI(),l=(0,N.$P)(),d=(0,n.useMemo)((()=>s?.eventCardFactory({identifier:i??"",position:a,uri:c??""})),[s,i,c,a]),m=(0,N.Wi)(d),g=e=>{o(e),d&&l.logInteraction(d.hitUiReveal())};if(t.concerts.length>1)return(0,oe.jsx)("div",{ref:m,children:(0,oe.jsx)(jt,{event:t,onClick:g})});return(0,oe.jsx)("div",{ref:m,children:(0,oe.jsx)(dt.Z,{concert:r,isVirtual:"online"===t.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:c}))}})})})),_t="yLIDHkmBrjsAVNMCcFM_",Nt="qr_9NXyk7D0t6wclM5R0",Dt="mDxkFuOd3TBAQI2gXatq",bt="AQ8ZFs5U45GPiyJnqEvt",wt="E8DcbdVmmoGfC8R8S1Vw",kt="wzS5PwxEhferQEdjumt0",Ct="E0zwnbwA3HzqNi2BV4eq",It=(0,n.memo)((e=>{const{event:t,onClick:a}=e,s=(0,n.useCallback)((()=>a(t)),[t,a]),o=(0,B.CH)(t.openingDate),r=(0,B.CH)(t.closingDate),i=t.concerts[0].concert,c=i.artists[0];return(0,oe.jsxs)("div",{className:kt,onClick:s,onKeyPress:s,role:"link",tabIndex:0,children:[(0,oe.jsx)($.E,{src:c?.imageUri,alt:"",role:"presentation",className:_t}),(0,oe.jsxs)("div",{className:Nt,children:[(0,oe.jsx)(w.D.span,{variant:"cello",className:Dt,"data-testid":"event-title",children:(0,R.ij)(i)}),(0,oe.jsx)(w.D.span,{variant:"ballad",className:bt,children:(0,B.Bc)(o,r)}),(0,oe.jsxs)(w.D.span,{variant:"ballad",className:wt,"data-testid":"event-venue",children:[(0,W.sk)(t)&&(0,oe.jsx)(O.V,{iconSize:16,className:Ct}),v.ag.get("concerts.count",t.concerts.length)]})]})]})})),St=(0,n.memo)((e=>{const{concert:t,isVirtual:a,onClick:n}=e,{venue:s,location:o}=t,r=t.artists[0],i=(0,B.CH)(t.startDate.localDate);return(0,oe.jsxs)(G.Link,{to:`/concert/${t?.id}`,className:kt,"data-testid":"concert-row",onClick:n,children:[(0,oe.jsx)($.E,{src:r?.imageUri,alt:"",role:"presentation",className:_t}),(0,oe.jsxs)("div",{className:Nt,children:[(0,oe.jsx)(w.D.span,{variant:"cello",className:Dt,"data-testid":"event-title",children:(0,R.ij)(t)}),(0,oe.jsxs)(w.D.span,{variant:"ballad",className:bt,children:[(0,B.xE)(i)," • ",(0,B.hK)(i)]}),(0,oe.jsxs)(w.D.span,{variant:"ballad",className:wt,"data-testid":"event-venue",children:[(0,W.$R)(t)&&(0,oe.jsx)(O.V,{iconSize:16,className:Ct}),a?s:[s,o].join(v.ag.getSeparator())]})]})]})})),Ft=(0,n.memo)((e=>{const{event:t,position:a,sectionSpec:s,onOpenGroupedEvent:o}=e,r=t.concerts[0]?.concert,i=r?.id,c=r&&(0,lt.g3)(r.id).toURI(),l=(0,N.$P)(),d=(0,n.useMemo)((()=>s?.eventRowFactory({identifier:i??"",position:a,uri:c??""})),[s,i,c,a]),m=(0,N.Wi)(d),g=e=>{o(e)};if(t.concerts.length>1)return(0,oe.jsx)("div",{ref:m,children:(0,oe.jsx)(It,{event:t,onClick:g})});return(0,oe.jsx)("div",{ref:m,children:(0,oe.jsx)(St,{concert:r,isVirtual:"online"===t.source,onClick:()=>{d&&l.logInteraction(d.hitUiNavigate({destination:c??""}))}})})}));var Et=a(15644);const Ut=(0,n.memo)((e=>{const{title:t="",identifier:a,position:s,events:o,feedSpec:r,onOpenGroupedEvent:i,layout:c}=e,l=(0,n.useMemo)((()=>r?.eventSectionFactory({identifier:a,position:s})),[r,a,s]),d=(0,N.Wi)(l);return 0===o.length?null:(0,oe.jsxs)("div",{className:we,ref:d,children:["grid"===c&&(0,oe.jsx)(Et.ZP,{value:"headered-grid",index:s,children:(0,oe.jsx)(U.P,{total:o.length,title:t,showAll:!0,children:o.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,oe.jsx)(yt,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:i},a?.id)}))})}),"list"===c&&(0,oe.jsxs)("div",{children:[(0,oe.jsx)(w.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:Se,children:t}),o.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,oe.jsx)(Ft,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:i},a?.id)}))]})]})})),Lt=(0,n.memo)((e=>{const{eventGroups:t,locationName:a,isLoading:s,feedSpec:o,onOpenGroupedEvent:r,layout:i}=e,c=(0,h.W6)(D.v4),l=(0,n.useMemo)((()=>o?.eventSectionFactory({identifier:"all",position:c?1:0})),[o,c]),d=(0,N.Wi)(l);return s?(0,oe.jsx)(E.h,{hasError:!1,errorMessage:""}):t?0===t.length||0===t[0].events.length?(0,oe.jsx)(F.u,{title:v.ag.get("concerts.error.no_concerts_found_title"),message:v.ag.get("concerts.error.no_concerts_found_message",a),renderInline:!0}):(0,oe.jsx)("div",{ref:d,children:t.map((e=>(0,oe.jsxs)("div",{className:Ae,children:["grid"===i&&(0,oe.jsx)(U.P,{total:e.events.length,title:v.ag.formatDate(new Date(`${e.date}T00:00:00`),{weekday:"long",day:"numeric",month:"long",year:"numeric"}),showAll:!0,children:e.events.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,oe.jsx)(yt,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:r},a?.id)}))}),"list"===i&&(0,oe.jsxs)("div",{children:[(0,oe.jsx)(w.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:Se,children:v.ag.formatDate(new Date(`${e.date}T00:00:00`),{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),e.events.map(((e,t)=>{const a=e.concerts[0]?.concert;return(0,oe.jsx)(Ft,{event:e,position:t,sectionSpec:l,onOpenGroupedEvent:r},a?.id)}))]})]},e.date)))}):null})),Mt={month:"short",day:"numeric"},Ot=e=>{if((0,b.Z)(e.from,e.to))return v.ag.formatDate(e.from,Mt);return`${v.ag.formatDate(e.from,Mt)} - ${v.ag.formatDate(e.to,Mt)}`},Pt=(0,n.memo)((e=>{const{geonameId:t,spec:a,layout:s}=e,i=(()=>{const[e]=(0,r.lr)(),t=e.get("startDate")?.trim(),a=e.get("endDate")?.trim(),n=ye(t),s=ye(a);return n&&s&&{from:n,to:s}})(),c=(0,o.s0)(),[,l]=(0,r.lr)(),[d]=(0,r.lr)(),[m,g]=(0,n.useState)(),[u,p]=(0,n.useState)(!1),f=(0,De.o)(),x=(0,n.useMemo)((()=>a?.headerFactory()),[a]),j=(0,n.useMemo)((()=>a?.datePickerModalFactory()),[a]),y=(0,n.useMemo)((()=>a?.cityInfoFactory()),[a]),_=(0,N.$P)(),{data:b,isLoading:F,hasNextPage:E,isFetchingNextPage:U,fetchNextPage:L}=(M={geonameId:t,startDate:i&&(0,W.ie)(i.from),endDate:i&&(0,W.ie)(i.to)},(0,le.useInfiniteQuery)(["concerts","all",M],he,{staleTime:fe,keepPreviousData:!0,getNextPageParam:(e,t)=>{if(!(t.length>=50)&&0!==e.events.length)return t.length+1}}));var M;const{data:O,isLoading:P}=xe(e.geonameId),$=O?.events.slice(0,5),A=(0,n.useMemo)((()=>(0,W.k9)(b?.pages??[])),[b?.pages]),G=b?.pages[0]?.userLocation||v.ag.get("concerts.default_location"),B=e=>{g(e);const t=e.concerts[0]?.concert.artistUris[0];f({type:"click",intent:"open-grouped-live-event",targetUri:t})},R=(0,h.W6)(be.HE5),z=(0,h.W6)(D.v4),H=(0,W.Vv)(new Date),T=(0,W.pm)(new Date),V=(0,n.useCallback)((e=>{const t={filter:"all"};if(e&&(t.startDate=(0,W.ie)(e.from),t.endDate=(0,W.ie)(e.to),j)){const e=new URLSearchParams(t).toString();_.logInteraction(j.doneButtonFactory({uri:e}).hitUiNavigate({destination:e}))}p(!1),l(t),j&&_.logInteraction(j.doneButtonFactory({uri:new URLSearchParams(t).toString()}).hitUiHide())}),[l,j,_]),Q=(0,n.useCallback)((e=>{const t={filter:"all"};(0,W.DF)(i,e)||(t.startDate=(0,W.ie)(e.from),t.endDate=(0,W.ie)(e.to)),l(t)}),[i,l]);return(0,oe.jsxs)("div",{children:[(0,oe.jsx)(S.$,{children:`${v.ag.get("concerts_shows_in")} ${G}`}),(0,oe.jsxs)("div",{className:Be,children:[(0,oe.jsx)(Ne.Z,{handleLocationChange:e=>{f({type:"click",intent:"change-live-events-location"}),e?.geonameId&&c({pathname:(0,W.yI)(e.geonameId,e.location),search:`?${d.toString()}`})},locationStr:G,headerSpec:x}),R&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(k.P,{className:We,iconLeading:C.a,onClick:()=>{p(!0),x&&_.logInteraction(x.datePickerButtonFactory().hitUiReveal())},size:"small",children:i?Ot(i):v.ag.get("live_events.date_picker_button_text")}),u&&(0,oe.jsx)(ct,{onClose:()=>{p(!1),j&&_.logInteraction(j.closeButtonFactory().hitUiHide())},onDone:V,dateRange:i,spec:j}),(0,oe.jsx)(I.A,{className:Re,size:"sm",selectedColorSet:"brightAccent",selected:(0,W.DF)(i,H),onClick:()=>{if(Q(H),x){const e={startDate:(0,W.ie)(H.from),endDate:(0,W.ie)(H.to)},t=new URLSearchParams(e).toString();_.logInteraction(x.datePresetButtonFactory({uri:t,identifier:"thisWeekend",position:0}).hitUiNavigate({destination:t}))}},children:v.ag.get("live_events.this_weekend_preset")}),(0,oe.jsx)(I.A,{className:Re,size:"sm",selectedColorSet:"brightAccent",selected:(0,W.DF)(i,T),onClick:()=>{if(Q(T),x){const e={startDate:(0,W.ie)(T.from),endDate:(0,W.ie)(T.to)},t=new URLSearchParams(e).toString();_.logInteraction(x.datePresetButtonFactory({uri:t,identifier:"nextWeekend",position:1}).hitUiNavigate({destination:t}))}},children:v.ag.get("live_events.next_weekend_preset")})]})]}),z&&!P&&$&&(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Ut,{title:v.ag.get("live_events.spotify_tab"),identifier:"see_all_spotify_events",position:0,events:$,feedSpec:a,onOpenGroupedEvent:B,layout:s}),(0,oe.jsx)("div",{className:Ke,children:(0,oe.jsx)(k.P,{size:"medium",onClick:()=>{if(l({filter:"first_party"}),a){const e="?filter=first_party";_.logInteraction(a.eventSectionFactory({identifier:"see_all_spotify_events",position:0}).seeAllSpotifyEventsButtonFactory({uri:e}).hitUiNavigate({destination:e}))}},children:v.ag.get("live_events.see_all_first_party")})})]}),(0,oe.jsx)(Lt,{isLoading:F,locationName:G,eventGroups:A,onOpenGroupedEvent:B,feedSpec:a,layout:s}),E&&(0,oe.jsx)("div",{className:Ge,children:(0,oe.jsx)(k.P,{disabled:U,onClick:()=>{L()},children:v.ag.get("concerts.load_more")})}),(0,oe.jsx)(ie,{event:m,locationName:G,feedSpec:a,onClose:()=>g(void 0)}),(0,oe.jsx)(w.D,{variant:"finale",semanticColor:"textSubdued",children:v.ag.get("live_events.disclaimer")}),b&&b.pages[0]&&b.pages[0].userLocationGeonameId&&(0,oe.jsx)(Ze,{geonameId:b.pages[0].userLocationGeonameId,locationName:G,spec:y})]})}));var $t=a(84107),At=a(13204);const Gt=(0,n.memo)((e=>{const{spec:t,layout:a}=e,[s,i]=(0,n.useState)(),[c]=(0,r.lr)(),l=(d=e.geonameId,(0,le.useQuery)(["concerts","popular",{geonameId:d}],pe,{staleTime:fe,keepPreviousData:!0}));var d;const m=l.data?.userLocation||v.ag.get("concerts.default_location"),g=(0,n.useMemo)((()=>t?.headerFactory()),[t]),u=(0,o.s0)();return(0,oe.jsxs)("div",{children:[(0,oe.jsx)(S.$,{children:`${v.ag.get("concerts_shows_in")} ${m}`}),(0,oe.jsx)("div",{className:Be,"data-testid":"location-selector",children:(0,oe.jsx)(Ne.Z,{handleLocationChange:e=>{(0,$t._)({type:"click",intent:"change-live-events-location"}),e?.geonameId&&u({pathname:(0,W.yI)(e.geonameId,e.location),search:`?${c.toString()}`})},locationStr:m,headerSpec:g})}),(0,oe.jsxs)("div",{className:ze,children:[(0,oe.jsx)(w.D,{variant:"celloCanon",semanticColor:"textBase",children:v.ag.get("live_events.for_you_anonymous_heading")}),(0,oe.jsx)(w.D,{variant:"ballad",className:He,semanticColor:"textSubdued",children:v.ag.get("live_events.for_you_anonymous_subheading")}),(0,oe.jsx)(Xe.D,{colorSet:"invertedLight",className:Te,onClick:()=>(0,At.L6)(),children:v.ag.get("live_events.sign_up_free")})]}),l.data&&(0,oe.jsx)(Ut,{title:v.ag.get("concerts_popular_near_you"),identifier:"popular",position:0,events:l.data.events,onOpenGroupedEvent:e=>{i(e);const t=e.concerts[0]?.concert.artistUris[0];(0,$t._)({type:"click",intent:"open-grouped-live-event",targetUri:t})},feedSpec:t,layout:a}),(0,oe.jsx)(ie,{event:s,locationName:m,feedSpec:t,onClose:()=>i(void 0)}),(0,oe.jsx)(w.D,{variant:"finale",semanticColor:"textSubdued",children:v.ag.get("live_events.disclaimer")}),l.data&&l.data.userLocationGeonameId&&(0,oe.jsx)(Ze,{geonameId:l.data.userLocationGeonameId,locationName:m})]})}));var Wt=a(1470),Bt=a(26519),Rt=a(62510);const zt=e=>24===e.length?new Date(e.substring(0,19)):22===e.length?new Date(e.substring(0,16)):new Date(e),Ht=e=>v.ag.formatDate(e,{month:"short",day:"numeric"}),Tt=e=>v.ag.formatDate(e,{hour:"numeric",minute:"numeric"}),Vt=(e,t)=>{if(e.toDateString()===t.toDateString())return(e=>v.ag.formatDate(e,{weekday:"short",month:"short",day:"numeric"}))(e);if(e.getMonth()===t.getMonth()){return`${v.ag.formatDate(e,{day:"numeric",month:"short"})}–${v.ag.formatDate(t,{day:"numeric"})}`}return`${v.ag.formatDate(e,{day:"numeric",month:"short"})}–${v.ag.formatDate(t,{day:"numeric",month:"short"})}`};var Qt=a(90928),Kt=a(60499);const Zt="QYX01DsOaw_MzJWWRL2R",Jt="wpTjIgQz7QkLGlEM2SbD",Xt="nfOfj83N2J77AhkT4NNC",qt="RVBcsEWqZBqE8LlyMmmT",Yt="M5l3yVBFFsTeGr0FCQ53",ea="pYZtdiW_JXpCpEpUNBl3",ta="smnK8C6twajPDjNeIZpu",aa="yEPFml56fHXdbEaxMRxQ",na="VJN_K93zj5zcQWuKpudd",sa="YvO7J4oC8u1QqRMBY4pg",oa=(0,n.memo)((e=>{const{concert:t,isVirtual:a,spec:s,position:o}=e,r=t?.id,i=(0,lt.g3)(t.id).toURI(),{venue:c,location:l}=t,d=t.artists[0],m=zt(t.startDate.localDate),g=(0,N.$P)(),u=(0,n.useMemo)((()=>(0,Qt.FV)(e.followers)),[e.followers]),h=(0,n.useMemo)((()=>s.concertCardFactory({identifier:r,position:o,uri:i})),[s,i,r,o]),p=(0,n.useMemo)((()=>(0,Bt.w)()),[]),f=(0,N.Wi)(h);return(0,oe.jsxs)(G.Link,{to:`/concert/${t.id}`,className:Zt,onClick:()=>{g.logInteraction(h.hitUiNavigate({destination:i}))},ref:f,children:[d.imageUri&&(0,oe.jsx)(mt.Z,{children:(0,oe.jsx)("div",{role:"img",className:aa,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${d.imageUri})`}})}),(0,oe.jsx)("time",{className:Jt,dateTime:t.startDate.localDate,children:(0,oe.jsx)(w.D,{as:"h5",variant:"mestoBold",children:Ht(m)})}),(0,oe.jsxs)("div",{className:Xt,dir:"auto",children:[(0,oe.jsxs)(w.D,{as:"h2",className:ta,variant:"mesto",children:[(0,Rt.FO)(m)," • ",Tt(m)]}),(0,oe.jsx)(w.D,{as:"h2",variant:"cello",weight:"bold",className:qt,children:(0,Qt.ij)(t)}),(0,oe.jsx)("div",{className:Yt,children:(0,oe.jsx)(w.D,{as:"h2",className:ea,variant:"mesto","data-testid":"location-name",children:a?c:[c,l].join(v.ag.getSeparator())})})]}),(0,oe.jsxs)("div",{className:na,onClick:()=>{g.logInteraction(p.hitNoAction())},children:[(0,oe.jsx)(Kt.D,{followers:e.followers,spec:p}),(0,oe.jsx)(w.D,{as:"p",variant:"mesto",className:sa,children:u})]})]})})),ra=(0,n.memo)((e=>{const{event:t,onClick:a,spec:s,position:o}=e,r=t.concerts[0].concert?.id,i=(0,lt.g3)(r).toURI(),c=(0,N.$P)(),l=(0,n.useMemo)((()=>s.concertCardFactory({identifier:r,position:o,uri:i})),[s,i,r,o]),d=(0,n.useMemo)((()=>(0,Bt.w)()),[]),m=(0,n.useCallback)((()=>{c.logInteraction(l.hitUiReveal()),a(t)}),[t,a,l,c]),g=(0,N.Wi)(l),u=zt(t.openingDate),h=zt(t.closingDate),p=t.concerts[0].concert,f=p.artists[0],x=(0,n.useMemo)((()=>(0,Qt.FV)(e.followers)),[e.followers]),j=(0,n.useCallback)((()=>{c.logInteraction(d.hitNoAction())}),[c,d]);return(0,oe.jsxs)("div",{onClick:m,className:Zt,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&m()},ref:g,children:[f.imageUri&&(0,oe.jsx)(mt.Z,{children:(0,oe.jsx)("div",{role:"img",className:aa,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${f.imageUri})`}})}),(0,oe.jsx)("time",{className:Jt,dateTime:u.toISOString(),children:(0,oe.jsx)(w.D,{as:"h5",variant:"mestoBold",children:Vt(u,h)})}),(0,oe.jsxs)("div",{className:Xt,dir:"auto",children:[(0,oe.jsx)(w.D,{as:"h2",variant:"cello",weight:"bold",className:qt,children:(0,Qt.ij)(p)}),(0,oe.jsx)("div",{className:Yt,children:(0,oe.jsx)(w.D,{as:"h2",variant:"mesto","data-testid":"concerts-count",children:v.ag.get("concerts.count",t.concerts.length)})})]}),(0,oe.jsxs)("div",{className:na,onClick:j,children:[(0,oe.jsx)(Kt.D,{followers:e.followers,spec:d}),(0,oe.jsx)(w.D,{as:"p",variant:"mesto",className:sa,children:x})]})]})}));var ia=a(84875),ca=a.n(ia);const la="LN9pdza5hvbdl1QB8dKo",da="P6SpMz_j_hH6lfVNSO2w",ma="axY_3UzUiQCQ2Asp0mQt",ga="CVhxc8GXvAXDO7De7zal",ua="IXXvh3b5U_b8xjeKorvb",ha=n.memo((function({headline:e,className:t,spec:a}){const n=(0,N.Wi)(a.welcomeCardFactory()),s=(0,N.$P)();return(0,oe.jsx)("div",{className:ca()(la,t),ref:n,onClick:()=>{s.logInteraction(a.welcomeCardFactory().hitNoAction())},children:(0,oe.jsx)("div",{className:ca()(ua),children:(0,oe.jsx)(w.D,{as:"p",variant:"cello",className:ca()(ga),children:e})})})})),pa=({spec:e})=>(0,oe.jsx)(ha,{spec:e,headline:v.ag.get("web-player.family-duo-concerts-shelf.main-card-family"),className:da}),va=({spec:e})=>(0,oe.jsx)(ha,{spec:e,headline:v.ag.get("web-player.family-duo-concerts-shelf.main-card-duo"),className:ma});var fa=a(31528),xa=a(62551),ja=a(59070),ya=a(67608),_a=a(93786);const Na="pSD8FAzxnwWRFeP817di",Da=n.memo(n.forwardRef((function(e,t){const{className:a,render:s,numberOfElements:o}=e,r=(0,n.useRef)(null),[i,c]=(0,n.useState)({columnCount:-1});(0,n.useImperativeHandle)(t,(()=>r.current));const l=(0,n.useCallback)((()=>{const e=r.current;if(!e||!e.parentElement)return;const t=((e,t)=>{const a=e;return a/t<196?Math.floor((a-24)/196):t})(e.parentElement.offsetWidth,o);c({columnCount:t})}),[o]);(0,_a.y)({refOrElement:r,observeOnly:"width",onResize:()=>{l()}}),(0,n.useLayoutEffect)((()=>{l()}),[l]);const d={"--column-count":`${i.columnCount}`,"--responsive-column-count":""+(i.columnCount-1)};return(0,oe.jsx)("div",{ref:r,className:ca()(Na,a),style:d,children:s(i)})})));Da.displayName="GridContainer";const ba="J16VxLN1EwiAF59N0j9C",wa="_1F6U2s5XM0jZxxOSpm4f",ka="Nafv5vKVkay8bxmKRw05",Ca=n.memo((function({title:e,children:t,seeAllUri:a,className:s="",testId:o="component",seeAllLabel:r,onClickShelfTitle:i,onClickShelfSeeAll:c,elementRef:l}){const d=(0,n.useCallback)((({columnCount:e})=>{if(!Array.isArray(t))return(0,oe.jsx)(oe.Fragment,{});const a=n.Children.toArray(t);return(0,oe.jsx)(oe.Fragment,{children:a.filter(((t,a)=>a<e))})}),[t]);return Array.isArray(t)&&0===t.length?null:(0,oe.jsxs)("section",{ref:l,className:ca()(s,ba),"data-testid":`${o}-shelf`,"aria-label":e,children:[(0,oe.jsx)("div",{className:wa,children:(0,oe.jsx)(ja.r,{title:e,seeAllUri:a,seeAllLabel:r,onClickTitle:i,onClickSeeAll:c})}),(0,oe.jsx)(Da,{className:ca()(ka),render:d,numberOfElements:n.Children.count(t)})]})}));Ca.displayName="BaseShelf";const Ia=e=>(0,oe.jsx)(xa.L,{onError:e=>{(0,ya.vK)(e,"Shelf")},children:(0,oe.jsx)(Ca,{...e})});const Sa=e=>{const{spec:t}=(0,fa.f)(Wt.u,{}),a=(0,n.useMemo)((()=>t.concertsShelfContainerFactory({position:e.position})),[t,e.position]),s=(0,N.Wi)(a);return(0,oe.jsx)("div",{"data-testid":"family-duo-concerts-shelf",ref:s,children:(0,oe.jsxs)(Ia,{title:"family"===e.shelfData.planType?v.ag.get("web-player.family-duo-concerts-shelf.shelf-title-family"):v.ag.get("web-player.family-duo-concerts-shelf.shelf-title-duo"),children:["family"===e.shelfData.planType?(0,oe.jsx)(pa,{spec:a}):(0,oe.jsx)(va,{spec:a}),e.shelfData.concerts.map(((n,s)=>function(e,t,a,n,s){const{concert:o,members:r}=e;return 1===o.concerts.length?(0,oe.jsx)(N.Nh,{spec:n,children:(0,oe.jsx)(oa,{concert:o.concerts[0].concert,followers:r,spec:a,position:s},`concert-card-${o.concerts[0].concert.id}`)}):(0,oe.jsx)(N.Nh,{spec:n,children:(0,oe.jsx)(ra,{event:o,onClick:t,followers:r,spec:a,position:s},`concert-grouped-card-${o.location}-${o.artists.join()}`)})}(n,e.onOpenGroupedEvent,a,t,s)))]})})},Fa=(0,n.memo)((e=>{const{isLoading:t,events:a,locationName:n,spec:s,layout:o,onOpenGroupedEvent:r,familyDuoShelfData:i}=e;if(t)return(0,oe.jsx)(E.h,{hasError:!1,errorMessage:""});if(0===a.length)return(0,oe.jsx)(F.u,{title:v.ag.get("concerts.error.no_concerts_found_title"),message:v.ag.get("concerts.error.no_concerts_found_message",n),renderInline:!0});const c=(e=>{const t={popular:[],recommended:[],online:[]};return e.forEach((e=>{switch(e.source){case"recommendation":t.recommended.push(e);break;case"popular":t.popular.push(e);break;case"online":t.online.push(e)}})),t})(a);return(0,oe.jsxs)(oe.Fragment,{children:[i&&(0,oe.jsx)(Sa,{shelfData:i,onOpenGroupedEvent:r,position:0}),(0,oe.jsx)(Ut,{title:v.ag.get("concerts_upcoming_virtual_events"),identifier:"online",position:i?1:0,events:c.online,onOpenGroupedEvent:r,feedSpec:s,layout:o}),(0,oe.jsx)(Ut,{title:v.ag.get("concerts_recommended_for_you"),identifier:"recommended",position:i?2:1,events:c.recommended,onOpenGroupedEvent:r,feedSpec:s,layout:o}),(0,oe.jsx)(Ut,{title:v.ag.get("concerts_popular_near_you"),identifier:"popular",position:i?3:2,events:c.popular,onOpenGroupedEvent:r,feedSpec:s,layout:o})]})}));var Ea=a(3497);const Ua=(0,n.memo)((e=>{const{geonameId:t,spec:a,layout:s}=e,r=(0,o.s0)(),[i,c]=(0,n.useState)(),l=(0,De.o)(),d=(0,n.useMemo)((()=>a.headerFactory()),[a]),{data:m,isLoading:g}=(e=>{const t=(0,le.useQueryClient)();return(0,le.useQuery)(["concerts",e],ue,{staleTime:fe,keepPreviousData:!0,onSuccess(a){if(e.geonameId||!a.userLocationGeonameId)return;const n=parseInt(a.userLocationGeonameId,10),s=["concerts",{...e,geonameId:n}];t.setQueryData(s,(()=>a))}})})({geonameId:t}),u=m?.userLocation||v.ag.get("concerts.default_location");((e={})=>{(0,le.useQuery)(["family-duo-concert-recommendations-aa-test",e],Ea.P,{enabled:(0,h.W6)(be.hjm)})})({geonameId:e.geonameId});const{data:p,isFetched:f,isLoading:x}=((e={})=>(0,le.useQuery)(["family-duo-concert-recommendations",e],Ea.P,{enabled:(0,h.W6)(be.YCf),retry:!1}))({geonameId:e.geonameId}),j=p&&f,y=(p?.concerts??[]).length>0;return(0,oe.jsxs)("div",{children:[(0,oe.jsx)(S.$,{children:`${v.ag.get("concerts_shows_in")} ${u}`}),(0,oe.jsx)("div",{className:Be,"data-testid":"location-selector",children:(0,oe.jsx)(Ne.Z,{handleLocationChange:e=>{l({type:"click",intent:"change-live-events-location"}),e?.geonameId&&r((0,W.yI)(e.geonameId,e.location))},locationStr:u,headerSpec:d})}),(0,oe.jsx)(Fa,{isLoading:g||x,familyDuoShelfData:j&&y?p:void 0,events:m?.events||[],locationName:u,spec:a,onOpenGroupedEvent:e=>{c(e);const t=e.concerts[0]?.concert.artistUris[0];l({type:"click",intent:"open-grouped-live-event",targetUri:t})},layout:s}),(0,oe.jsx)(ie,{event:i,locationName:u,feedSpec:a,onClose:()=>c(void 0)}),(0,oe.jsx)(w.D,{variant:"finale",semanticColor:"textSubdued",children:v.ag.get("live_events.disclaimer")}),m&&m.userLocationGeonameId&&(0,oe.jsx)(Ze,{geonameId:m.userLocationGeonameId,locationName:u})]})})),La=(0,n.memo)((e=>{const{spec:t,layout:a}=e,n=(0,le.useQuery)("savedConcerts",ge,{keepPreviousData:!1});return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(S.$,{children:`${v.ag.get("live_events.label")}`}),n.data?.events.length?(0,oe.jsx)(oe.Fragment,{children:(0,oe.jsx)(Ut,{title:v.ag.get("concerts_upcoming"),identifier:"saved",position:0,events:n.data?.events,feedSpec:t,onOpenGroupedEvent:()=>{},layout:a})}):(0,oe.jsxs)("div",{className:Le,children:[(0,oe.jsx)(w.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:Pe,children:v.ag.get("concerts_interested_in_live_events")}),(0,oe.jsx)(w.D,{as:"p",className:$e,children:v.ag.get("concerts_no_events_description")}),(0,oe.jsx)(G.default,{to:"/concerts",className:Me,children:(0,oe.jsx)(k.P,{as:"span",className:Oe,children:v.ag.get("concerts_browse_more_events")})})]}),(0,oe.jsx)(w.D,{variant:"finale",semanticColor:"textSubdued",children:v.ag.get("live_events.disclaimer")})]})})),Ma=(0,n.memo)((e=>{const{spec:t,isLoading:a,data:n,onOpenGroupedEvent:s,layout:o}=e;if(a)return(0,oe.jsx)(E.h,{hasError:!1,errorMessage:""});if(!n||0===n.events.length)return(0,oe.jsxs)("div",{className:Le,children:[(0,oe.jsx)(w.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:Pe,children:v.ag.get("concerts.no_spotify_results_title")}),(0,oe.jsx)(w.D,{as:"p",className:$e,children:v.ag.get("concerts.no_spotify_results_description")})]});const r=(e=>{const t={near:[],other:[]};return e.forEach((e=>{switch(e.source){case"near_first_party":t.near.push(e);break;case"other_first_party":t.other.push(e)}})),t})(n.events);return(0,oe.jsxs)(oe.Fragment,{children:[(0,oe.jsx)(Ut,{title:v.ag.get("concerts.header.near"),identifier:"spotify_near",position:0,events:r.near,feedSpec:t,onOpenGroupedEvent:s,layout:o}),(0,oe.jsx)(Ut,{title:v.ag.get("concerts.header.other"),identifier:"spotify_other",position:1,events:r.other,feedSpec:t,onOpenGroupedEvent:s,layout:o})]})})),Oa=(0,n.memo)((e=>{const{geonameId:t,spec:a,layout:s}=e,i=(0,o.s0)(),[c]=(0,r.lr)(),l=(0,De.o)(),{data:d,isLoading:m}=xe(t),[g,u]=(0,n.useState)(),h=(0,n.useMemo)((()=>a.headerFactory()),[a]),p=d?.userLocation||v.ag.get("concerts.default_location");return(0,oe.jsxs)("div",{children:[(0,oe.jsx)(S.$,{children:`${v.ag.get("live_events.label")}`}),(0,oe.jsx)("div",{className:Be,"data-testid":"location-selector",children:(0,oe.jsx)(Ne.Z,{handleLocationChange:e=>{l({type:"click",intent:"change-live-events-location"}),e?.geonameId&&i({pathname:(0,W.yI)(e.geonameId,e.location),search:`?${c}`})},locationStr:p,headerSpec:h})}),(0,oe.jsx)(Ma,{spec:a,data:d,isLoading:m,onOpenGroupedEvent:e=>{u(e);const t=e.concerts[0]?.concert.artistUris[0];l({type:"click",intent:"open-grouped-live-event",targetUri:t})},layout:s}),(0,oe.jsx)(ie,{event:g,locationName:p,feedSpec:a,onClose:()=>u(void 0)}),(0,oe.jsx)(w.D,{variant:"finale",semanticColor:"textSubdued",children:v.ag.get("live_events.disclaimer")}),d&&d.userLocationGeonameId&&(0,oe.jsx)(Ze,{geonameId:d.userLocationGeonameId,locationName:p})]})})),Pa=i.vI0,$a={url:"https://tickets.spotifycdn.com/partner-assets/Hub%20header%20image/Desktop%20header%20IMG.png",width:2736,height:720},Aa=()=>{const{isAnonymous:e}=(0,s.v9)(_.Gg),t=(0,o.TH)(),a=t.pathname+t.search,i=(0,N.$P)(),b=(0,h.W6)(D.tp),w=(0,h.W6)(D.kK),[k,C]=(0,n.useState)(w?"list":"grid"),{spec:I}=(0,N.fU)(p.y,{}),S=_e({isAnonymous:e,isInterestedEnabled:b}),F=(0,n.useMemo)((()=>I.headerFactory().liveEventsNavbarFactory({uri:a,reason:S.type})),[I,S,a]),E=(0,N.Wi)(F),U=e=>{const a=`${t.pathname}?filter=${e}`,n=I.headerFactory().liveEventsNavbarFactory({uri:a,reason:e}).hitUiNavigate({destination:a});i.logInteraction(n)},L=()=>{const e=I.headerFactory().layoutToggleFactory().hitToggleState({stateBeforeToggle:k,stateAfterToggle:"grid"===k?"list":"grid"});i.logInteraction(e),C("grid"===k?"list":"grid")};return(0,oe.jsxs)("section",{className:ke,children:[(0,oe.jsxs)(x.gF,{size:x.fR.SMALL,backgroundColor:Pa,backgroundImages:[$a],children:[(0,oe.jsx)(x.sP,{children:(0,oe.jsx)(x.xd,{children:v.ag.get("live_events.label")})}),(0,oe.jsx)(j.W,{children:(0,oe.jsx)(y.i,{text:v.ag.get("live_events.label")})})]}),(0,oe.jsxs)("div",{className:Ce,children:[(0,oe.jsx)(f.I,{backgroundColor:Pa}),(0,oe.jsxs)("div",{className:Ee,ref:E,children:[(0,oe.jsx)(c.l,{list:(0,oe.jsx)("nav",{"aria-label":"live events navbar",children:(0,oe.jsxs)(l.F,{children:[(0,oe.jsx)(d.c,{id:"for_you_link",label:v.ag.get("live_events.for_you_tab"),active:"foryou"===S.type,className:Ue,component:r.rU,onClick:()=>U("foryou"),sentenceCase:!0,to:{search:"filter=foryou"}},"foryou"),(0,oe.jsx)(d.c,{id:"concerts_all_link",label:v.ag.get("live_events.all_events_tab"),active:"all"===S.type,className:Ue,component:r.rU,onClick:()=>U("all"),sentenceCase:!0,to:{search:"filter=all"}},"all"),(0,oe.jsx)(d.c,{id:"concerts_first_party_link",label:v.ag.get("live_events.spotify_tab"),active:"first_party"===S.type,className:Ue,component:r.rU,onClick:()=>U("first_party"),sentenceCase:!0,to:{search:"filter=first_party"}},"first_party"),!e&&b&&(0,oe.jsx)(d.c,{id:"concerts_interested_link",label:v.ag.get("concerts_interested"),active:"saved"===S.type,className:Ue,component:r.rU,onClick:()=>U("saved"),sentenceCase:!0,to:{search:"filter=saved"}},"saved")]})})}),w&&"grid"===k&&(0,oe.jsx)(m.o,{"aria-label":v.ag.get("concerts.feed_list_layout"),iconOnly:g.d,className:Fe,onClick:L,size:"small"}),w&&"list"===k&&(0,oe.jsx)(m.o,{"aria-label":v.ag.get("concerts.feed_grid_layout"),iconOnly:u.z,className:Fe,onClick:L,size:"small"})]}),(0,oe.jsxs)("div",{className:Ie,children:[e&&"foryou"===S.type&&(0,oe.jsx)(Gt,{geonameId:S.geonameId,spec:I,layout:k}),!e&&"foryou"===S.type&&(0,oe.jsx)(Ua,{geonameId:S.geonameId,spec:I,layout:k}),"all"===S.type&&(0,oe.jsx)(Pt,{geonameId:S.geonameId,spec:I,layout:k}),"first_party"===S.type&&(0,oe.jsx)(Oa,{geonameId:S.geonameId,spec:I,layout:k}),"saved"===S.type&&(0,oe.jsx)(La,{spec:I,layout:k})]})]})]})}},3497:(e,t,a)=>{a.d(t,{g:()=>r,P:()=>o});var n=a(90326),s=a(74021);const o=async e=>{const[t,{geonameId:a}]=e.queryKey,o=await((e,t)=>e.build().withMethod("GET").withHost(s.gH).withPath("/concerts/").withEndpointIdentifier("/cooper/concerts").withQueryParameters({...t&&{geonameId:t}}).withoutMarket().send())(n.b.getInstance(),a);return o.body},r=async e=>{const[t,{artists:a}]=e.queryKey,o=await((e,t)=>e.build().withMethod("POST").withHost(s.gH).withPath("/followers/").withEndpointIdentifier("/cooper/followers").withHeaders([{key:"content-type",value:"application/json"},{key:"accept",value:"application/json"}]).withBody(JSON.stringify({artists:t})).withoutMarket().send())(n.b.getInstance(),a);return o.body}},60499:(e,t,a)=>{a.d(t,{D:()=>d});var n=a(59496),s=a(34046);const o="g4AhdK8faqTe7v8VqC3x";var r=a(4637);const i=(0,n.memo)((({alt:e})=>(0,r.jsxs)("svg",{height:8,width:8,"aria-hidden":"true",viewBox:"-8 -8 32 32",className:o,children:[(0,r.jsx)("title",{children:e}),(0,r.jsx)("path",{d:"M6.233.371a4.388 4.388 0 0 1 5.002 1.052c.421.459.713.992.904 1.554.143.421.263 1.173.22 1.894-.078 1.322-.638 2.408-1.399 3.316l-.127.152a.75.75 0 0 0 .201 1.13l2.209 1.275a4.75 4.75 0 0 1 2.375 4.114V16H.382v-1.143a4.75 4.75 0 0 1 2.375-4.113l2.209-1.275a.75.75 0 0 0 .201-1.13l-.126-.152c-.761-.908-1.322-1.994-1.4-3.316-.043-.721.077-1.473.22-1.894a4.346 4.346 0 0 1 .904-1.554c.411-.448.91-.807 1.468-1.052zM8 1.5a2.888 2.888 0 0 0-2.13.937 2.85 2.85 0 0 0-.588 1.022c-.077.226-.175.783-.143 1.323.054.921.44 1.712 1.051 2.442l.002.001.127.153a2.25 2.25 0 0 1-.603 3.39l-2.209 1.275A3.25 3.25 0 0 0 1.902 14.5h12.196a3.25 3.25 0 0 0-1.605-2.457l-2.209-1.275a2.25 2.25 0 0 1-.603-3.39l.127-.153.002-.001c.612-.73.997-1.52 1.052-2.442.032-.54-.067-1.097-.144-1.323a2.85 2.85 0 0 0-.588-1.022A2.888 2.888 0 0 0 8 1.5z"})]}))),c="WCQhjx2ZwtN1mwka_4wj",l=e=>{const t=(0,s.$P)(),a=`spotify:user:${e.follower.username}`;return(0,n.useEffect)((()=>{t.logImpression(e.spec.planMemberFactory({identifier:e.follower.memberId,uri:a}).impression())})),e.follower.profileImageUrl?(0,r.jsx)("img",{src:e.follower.profileImageUrl,alt:e.follower.displayName??e.follower.username},`follower-${e.follower.displayName??e.follower.username}`):(0,r.jsx)(i,{alt:e.follower.displayName},`follower-${e.follower.displayName}`)},d=(0,n.memo)((e=>(0,r.jsx)("div",{className:c,children:e.followers.map(((t,a)=>(0,r.jsx)(l,{follower:t,spec:e.spec},`follower-${a}`)))})))},90928:(e,t,a)=>{a.d(t,{FV:()=>r,a4:()=>i,ij:()=>o});var n=a(30099),s=a(4637);const o=e=>{if((e=>!!e.title&&(e.festival||!e.artists.length))(e))return e.title;const t=(e=>e.artists.map((e=>e.name)))(e);return 1===t.length?n.ag.get("concert.header.upcoming_concert_title_1",...t):2===t.length?n.ag.get("concert.header.upcoming_concert_title_2",...t):3===t.length?n.ag.get("concert.header.upcoming_concert_title_3",...t):4===t.length?n.ag.get("concert.header.upcoming_concert_title_4",...t):t.length>4?n.ag.get("concert.header.upcoming_concert_title_more",...t):""},r=e=>1===e.length?n.ag.get("web-player.family-duo-concerts-shelf.X-follows",e[0].displayName??e[0].username):n.ag.get("web-player.family-duo-concerts-shelf.X-of-your-family-follow",e.length),i=(e,t)=>{const a=e.map(((e,a)=>{const n=`spotify:user:${e.username}`;return(0,s.jsx)("a",{onClick:()=>t(n,e.memberId),href:n,children:e.displayName??e.username},`follower-name-${a}`)}));return 1===e.length?n.ag.get("web-player.family-duo-concerts-shelf.X-follows",a[0]):2===e.length?n.ag.get("web-player.family-duo-concerts-shelf.2-follow",...a):3===e.length?n.ag.get("web-player.family-duo-concerts-shelf.3-follow",...a):4===e.length?n.ag.get("web-player.family-duo-concerts-shelf.4-follow",...a):n.ag.get("web-player.family-duo-concerts-shelf.5-follow",...a)}}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map